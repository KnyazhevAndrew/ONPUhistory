function htmlEscape(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","\\":"&bsol;"};return(""+e).replace(/[&<>"'\\]/g,function(e){return t[e]})}!function(e){"use strict";e.fn.extend({aria:function(t,a){return arguments.length&&arguments.length>1?this.each(function(){e.attr(this,"aria-"+t,a)}):e.attr(this.get(0),"aria-"+t)},removeAria:function(t){return this.each(function(){e.removeAttr(this,"aria-"+t)})}})}(jQuery),function(e){"use strict";e.fn.depotAlphabetNav=function(t){return e(this).each(function(){e.data(this,"depotAlphabetNav")||e.data(this,"depotAlphabetNav",new function(t,a){var o=e(window),n=e("html, body"),i=Modernizr.csstransforms3d,r=Modernizr.csstransforms,s=Modernizr.csstransitions,l={};return l.id=(new Date).getTime(),l.params=e.extend(!0,{buttonUpSelector:".js-alphabet-button-up",buttonBottomSelector:".js-alphabet-button-bottom",buttonSelector:".js-alphabet-button",listSelector:".js-alphabet-list",sectionSelector:".js-person",activeClassName:"is-active",dataParam:"letter",steps:4,holdDelay:300,duration:250,debounce:30,easing:"linear",onInit:null},a),l.eventNameSpace=".depotAlphabetNav-"+l.id,l.addEventNS=function(t,a){a||(a="");var o=t.split(" "),n=[];return e.each(o,function(){n.push(this+l.eventNameSpace+a)}),n.join(" ")},l.init=function(){return l.$nav=e(t),l.$navButtonUp=l.$nav.find(l.params.buttonUpSelector),l.$navButtonDown=l.$nav.find(l.params.buttonBottomSelector),l.$list=l.$nav.find(l.params.listSelector),l.$buttons=l.$nav.find(l.params.buttonSelector),l.position={top:0},l.bindEvents(),e.isFunction(l.params.onInit)&&l.params.onInit.call(l),l},l.bindEvents=function(){l.$buttons.on(l.addEventNS("click"),function(){var t=e(this),a=t.data(l.params.dataParam);t.parent().parent().get(0).focus(),l.goToSection(a)}),l.$navButtonUp.on(l.addEventNS("click"),function(e){e.preventDefault(),l.scrollUp()}),l.$navButtonUp.on(l.addEventNS("mousedown touchstart MSPointerDown pointerdown"),function(e){e.preventDefault(),l.holdInterval&&(window.clearInterval(l.holdInterval),l.holdInterval=!1),l.holdInterval=window.setInterval(l.scrollUp,l.params.holdDelay)}),l.$navButtonUp.on(l.addEventNS("mouseup touchend MSPointerUp pointerup"),function(e){e.preventDefault(),l.holdInterval&&(window.clearInterval(l.holdInterval),l.holdInterval=!1)}),l.$navButtonDown.on(l.addEventNS("click"),function(e){e.preventDefault(),l.scrollDown()}),l.$navButtonDown.on(l.addEventNS("mousedown touchstart MSPointerDown pointerdown"),function(e){e.preventDefault(),l.holdInterval&&(window.clearInterval(l.holdInterval),l.holdInterval=!1),l.holdInterval=window.setInterval(l.scrollDown,l.params.holdDelay)}),l.$navButtonDown.on(l.addEventNS("mouseup touchend MSPointerUp pointerup"),function(e){e.preventDefault(),l.holdInterval&&(window.clearInterval(l.holdInterval),l.holdInterval=!1)}),l.$list.on(l.addEventNS("wheel mousewheel DOMMouseScroll"),function(e){e.preventDefault(),e.stopPropagation();var t=l.getWheelDirection(e);t>0?l.debounceEvent("wheelUp",l.scrollUp,30):t<0&&l.debounceEvent("wheelDown",l.scrollDown,30)}),e(document).on(l.addEventNS("keypress"),function(t){var a=e(t.target),o=String.fromCharCode(t.which);!o||a.is("input")||a.is("select")||a.is("textarea")||l.goToSection(l.latToCyr(o).toUpperCase())}),o.on(l.addEventNS("init:alphabet resize"),function(){l.debounceEvent("resize",l.resize)}).trigger("init:alphabet")},l.debounceEvent=function(t,a,o){e.isFunction(a)&&(l.debounceTimers||(l.debounceTimers={}),l.debounceTimers[t]?window.clearTimeout(l.debounceTimers[t]):a(),l.debounceTimers[t]=window.setTimeout(function(){delete l.debounceTimers[t]},o||l.params.debounce))},l.getWheelDirection=function(e){return e.originalEvent.deltaY||e.originalEvent.deltaX?-1*e.originalEvent.deltaY:-1*e.originalEvent.detail||e.originalEvent.wheelDelta},l.goToSection=function(t){l.$buttons.each(function(){var a=e(this);if(a.data(l.params.dataParam)===t)return a.parent().addClass(l.params.activeClassName).siblings().removeClass(l.params.activeClassName),!1;a.parent().get(0).focus()});var a=e(l.params.sectionSelector+"[data-"+l.params.dataParam+'="'+t+'"]').first();if(a.length){var o=a.parent().offset().top,i=a.offset().top;n.one(l.addEventNS("mousewheel wheel DOMMouseScroll",".wheel"),function(){e(this).stop()}).animate({scrollTop:i-o},750,function(){n.off(".wheel")})}},l.resize=function(){l.listHeight=l.$list.height(),l.wiewportHeight=l.$list.parent().height(),l.deltaHeight=l.listHeight-l.wiewportHeight,l.position.top<-l.deltaHeight&&(l.position.top=-l.deltaHeight),l.step=l.deltaHeight/l.params.steps,l.smartMoveAnimation(l.$list,l.position,0)},l.scrollUp=function(){l.position.top<=0&&(l.position.top+=l.step,l.position.top>0&&(l.position.top=0),l.smartMoveAnimation(l.$list,l.position))},l.scrollDown=function(){l.position.top<=0&&(l.position.top-=l.step,l.position.top<-l.deltaHeight&&(l.position.top=-l.deltaHeight),l.smartMoveAnimation(l.$list,l.position))},l.latToCyr=function(e){return e.replace(/([a-z;:~,<>\[\{\]\}\'\"\\\.\|])/gi,function(e){var t="йцукенгшщзххъъфывапролджжээёёёёячсмитьббюю".charAt("qwertyuiop[{]}asdfghjkl;:'\"\\|`~zxcvbnm,<.>".indexOf(e.toLowerCase()))||e;return e.toUpperCase()===e&&e.toLowerCase()!==e||/([<>:~\"|\{\}])/gi.test(e)?t.toUpperCase():t})},l.smartMoveAnimation=function(t,a,o,n){var c={left:a.left||0,top:a.top||0},p={};void 0===o&&(o=l.params.duration),i?p[Modernizr.prefixed("transform")]="translate3d("+c.left+"px, "+c.top+"px, 0)":r?p[Modernizr.prefixed("transform")]="translate("+c.left+"px, "+c.top+"px)":p=c,o?s?(p[Modernizr.prefixed("transition")]=Modernizr.prefixed("transform")+" "+o+"ms "+l.params.easing,t.css(p),e.isFunction(n)&&window.setTimeout(n,o)):e.isFunction(n)?t.stop().animate(p,o,n):t.stop().animate(p,o):(s&&(p[Modernizr.prefixed("transition")]=Modernizr.prefixed("transform")+" 0s "+l.params.easing),t.css(p),e.isFunction(n)&&n())},l.init()}(this,t))})}}(jQuery),function(e){"use strict";e.fn.depotForm=function(t){return e(this).each(function(){e.data(this,"depotForm")||e.data(this,"depotForm",new function(t,a){var o={},n=e(window);return o.id=(new Date).getTime(),o.api={id:o.id},o.defaults={fields:'input:not([type="hidden"]), textarea, select',fieldContainerSelector:".js-field",fieldInUseClassName:"is-busy",fieldErrorContainerSelector:".js-error-text",fieldErrorClassName:"is-invalid",fieldCaptchaSelector:".captcha-wrapper img",fieldCaptchaRefreshClassName:"js-captcha-refresh",fieldCaptchaRefreshDataUrl:"refresh-url",fieldCaptchaFieldSelector:'[id*=captcha][type="text"]',fieldCaptchaHiddenFieldSelector:'[id*=captcha][type="hidden"]',formProcessingClassName:"is-processing",dataType:"json",debounce:30,useAria:!0,validate:!0,realtimeValidation:!0,noHTMLValidation:!0,showErrors:!0,files:!1,errors:{required:"Обязательное поле",name:"Недопустимое значение",email:"Недопустимое значение",phone:"Недопустимое значение",select:"Необходимо выбрать",message:"Недопустимое значение",captcha:"Код введен неверно"},onInit:null,onChange:null,onInput:null,onReset:null,onSubmit:null,onSubmitAjax:null,onError:null,onValidationError:null},o.params=e.extend(!0,o.defaults,a),o.eventNameSpace=".depotForm-"+o.id,o.addEventNS=function(t,a){a||(a="");var n=t.split(" "),i=[];return e.each(n,function(){i.push(this+o.eventNameSpace+a)}),i.join(" ")},o.debounceEvent=function(t,a,n){e.isFunction(a)&&(o.debounceTimers||(o.debounceTimers={}),o.debounceTimers[t]&&window.clearTimeout(o.debounceTimers[t]),o.debounceTimers[t]=window.setTimeout(a,n||o.params.debounce))},o.resetErrorFor=function(e){return o.errors[e]=[],o},o.resetErrors=function(){return o.errors={length:0},o},o.collectErrors=function(){var e;o.errors.length=0;for(e in o.errors)o.errors[e]&&o.errors[e].length&&(o.errors.length+=1);return o.errors.length},o.latToCyr=function(e){return e.replace(/([a-z;:~,<>\[\{\]\}\'\"\\\.\|])/gi,function(e){var t="йцукенгшщзххъъфывапролджжээёёёёячсмитьббюю".charAt("qwertyuiop[{]}asdfghjkl;:'\"\\|`~zxcvbnm,<.>".indexOf(e.toLowerCase()))||e;return e.toUpperCase()===e&&e.toLowerCase()!==e||/([<>:~\"|\{\}])/gi.test(e)?t.toUpperCase():t})},o.startProcessingForm=function(){o.processing=!0,o.$form.addClass(o.params.formProcessingClassName),o.$form.find('[type="submit"]').prop("disabled",!0)},o.stopProcessingForm=function(){o.processing=!1,o.$form.removeClass(o.params.formProcessingClassName),o.$form.find('[type="submit"]').prop("disabled",!1)},o.busyField=function(e){var t=o.fieldsHash[e.get(0).id];return!0!==t.free&&void 0!==t.free||(e.closest(o.params.fieldContainerSelector).addClass(o.params.fieldInUseClassName),t.free=!1),o},o.freeField=function(e){var t=o.fieldsHash[e.get(0).id];return!1!==t.free&&void 0!==t.free||(e.closest(o.params.fieldContainerSelector).removeClass(o.params.fieldInUseClassName),t.free=!0),o},o.checkBusyField=function(t){var a=e(t);return o.fieldsHash[t.id]||(o.fieldsHash[t.id]={}),!t.value.length||-1!==t.type.indexOf("select")&&"0"===t.value?o.freeField(a):o.busyField(a),o},o.refreshCaptcha=function(){var t=o.$form.find(o.params.fieldCaptchaSelector),a=o.$form.find(o.params.fieldCaptchaHiddenFieldSelector),n=o.$form.find(o.params.fieldCaptchaFieldSelector),i=o.$captchaBtn.data(o.params.fieldCaptchaRefreshDataUrl)||"";t.length&&e.ajax({url:i,type:"get",dataType:"json",cache:!1,success:function(e){e&&e.key&&e.image_url&&(a.get(0).value=e.key,n.get(0).value="",t.attr("src",e.image_url))}})},o.clearInputTextareaField=function(e){return e.val("").trigger("change")},o.clearSelectField=function(t){return t.find("option:selected").each(function(){e(this).removeAttr("selected")}).trigger("change")},o.clearRadioField=function(e){var t=e.attr("name");return o.$form.find('[name="'+t+'"]').each(function(e){this.checked=0===e}),e.trigger("change")},o.clearCheckboxField=function(e){return e.removeAttr("checked").prop("checked",!1).trigger("change")},o.clearField=function(t){var a=e(t);a.is(":radio")?o.clearRadioField(a):a.is(":checkbox")?o.clearCheckboxField(a):a.is("select")?o.clearSelectField(a):o.clearInputTextareaField(a)},o.setError=function(e,t){return o.errors[e]?o.errors[e].push(t):o.errors[e]=[t],o},o.showErrors=function(){o.params.showErrors&&o.$form.find(o.params.fields).each(function(){var t=e(this),a=t.closest(o.params.fieldContainerSelector),n=a.find(o.params.fieldErrorContainerSelector);o.errors[this.name]&&o.errors[this.name].length?(a.addClass(o.params.fieldErrorClassName),o.params.useAria&&t.aria("invalid","true"),o.errors&&(n.text(o.errors[this.name][0]),o.params.useAria&&t.aria("describedby",n.attr("id")))):(a.removeClass(o.params.fieldErrorClassName),o.params.useAria&&t.removeAttr("aria-invalid").removeAttr("aria-describedby"))})},o.hideErrors=function(){o.params.showErrors&&o.$form.find(o.params.fields).each(function(){var t=e(this);t.closest(o.params.fieldContainerSelector).removeClass(o.params.fieldErrorClassName),o.params.useAria&&t.removeAttr("aria-invalid").removeAttr("aria-describedby")})},o.getSelectionRange=function(e,t){var a=e.type,o=0,n=0;if("text"===a||"search"===a||"url"===a||"tel"===a||"password"===a)if("number"==typeof e.selectionStart)o=e.selectionStart,n=e.selectionEnd;else{var i=document.selection.createRange(),r=e.createTextRange(),s=e.createTextRange(),l=e.value.length;r.moveToBookmark(i.getBookmark()),s.collapse(!1),r.compareEndPoints("StartToEnd",s)>-1?(o=l,n=l):(o=-r.moveStart("character",-l),n=-r.moveEnd("character",-l))}return t?{begin:o,end:n}:o},o.getSelection=function(e){return o.getSelectionRange(e,!0)},o.getCursorPosition=function(e){return o.getSelectionRange(e,!1)},o.setSelection=function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t.begin,t.end);else if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveEnd("character",t.begin),a.moveStart("character",t.end),a.select()}},o.setCursorPosition=function(e,t){return o.setSelection(e,{begin:t,end:t})},o.insertCharAt=function(e,t,a){var o=e.length;return e.substring(0,a)+t+e.substring(a,o)},o.replaceCharAt=function(e,t,a){var o=e.length;return e.substring(0,a.begin)+t+e.substring(a.begin+1,o+1)},o.maskField=function(e,t){var a=e.which;if(!/(8|37|38|39|40|46)/.test(a)){e.preventDefault();var n=t.className;if(-1!==n.indexOf("to-date"))return o.format(t,["([0-9]{2})","([0-9]{2})"],[".","."]),!1;-1!==n.indexOf("to-time")&&o.format(t,["([0-9]{2})"],[":"]),-1!==n.indexOf("to-card")&&o.format(t,["([0-9]{4})","([0-9]{4})","([0-9]{4})"],["-","-","-"]),-1!==n.indexOf("to-phone")&&o.format(t,["([+]?)","([0-9])","([0-9]{3})","([0-9]{3})","([0-9]{2})"],[""," (",") ","-","-"])}},o.format=function(t,a,n){var i=t.value,r=i,s="";e.each(n.join("").split(""),function(e,t){-1===s.indexOf(t)&&(s+=t)}),s=s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var l=i.replace(new RegExp("["+s+"]","ig"),""),c="",p="$1",d=o.getCursorPosition(t);e.each(a,function(e){var s=a[e]||"",u=n[e]||"",m=new RegExp(c+=s,"i");m.test(l)&&(r=l.replace(m,p+u),t.value=r,d!==i.length&&o.setCursorPosition(t,d)),p+=u+"$"+(e+2)})},o.modifyField=function(e,t){var a=t.className,n=e.charCode;if(-1!==a.indexOf("to-cyrillic")&&n){e.preventDefault();var i,r=t.value,s=String.fromCharCode(n),l=o.getSelection(t);i=o.latToCyr(s),t.value=o.replaceCharAt(r,i,l)}},o.validateField=function(t){if(o.params.validate){var a=t.className,n=e.trim(t.value);o.resetErrorFor(t.name),-1===a.indexOf("is-required")&&!0!==t.required||n.length||o.setError(t.name,o.params.errors.required),-1!==a.indexOf("is-checked")&&(t.checked||o.setError(t.name,o.params.errors.required)),-1!==a.indexOf("is-name")&&(new RegExp('^([a-zа-яё]{1})([a-zа-яё0-9 .,;:"/\\\\)(_«»<>“”-]{2,254})$',"ig").test(n)||o.setError(t.name,o.params.errors.name)),-1===a.indexOf("is-email")&&"email"!==t.type||new RegExp("^[a-z0-9](['_.-a-z0-9]+)[@]([a-z0-9]+)([.-a-z0-9]+)+[.]([a-z]{2,})$","i").test(n)||o.setError(t.name,o.params.errors.email),-1===a.indexOf("is-phone")&&"tel"!==t.type||new RegExp("^[0-9-+)( ]{7,}$","i").test(n)||o.setError(t.name,o.params.errors.phone),-1!==a.indexOf("is-message")&&(new RegExp("^(.{1,10000})","g").test(n)||o.setError(t.name,o.params.errors.message)),-1!==a.indexOf("is-captcha")&&(new RegExp("^([a-z]{6})$","ig").test(n)||o.setError(t.name,o.params.errors.captcha)),-1!==a.indexOf("is-select")&&0===t.type.indexOf("select")&&(t.value&&"0"!==t.value||o.setError(t.name,o.params.errors.select)),-1!==a.indexOf("is-file")&&"file"===t.type&&t.files&&t.files.length&&!new RegExp("(.*?)\\.(docx|doc|pdf|txt|mpeg|mpg|avi|mov|mp4|mp3|wav|mpg)$").test(t.files[0].name)&&o.setError(t.name,o.params.errors.type),-1!==a.indexOf("is-sized-file")&&"file"===t.type&&t.files&&t.files.length&&t.files[0].size>20971520&&o.setError(t.name,o.params.errors.size),-1===a.indexOf("is-url")&&"url"!==t.type||n&&!new RegExp("^(?:http(s)?://)?[\\w\\.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'(%)*+,;=.]+$","gi").test(n)&&o.setError(t.name,o.params.errors.url)}},o.bindEvents=function(){o.$form.on(o.addEventNS("keyup change input"),o.params.fields,function(t){var a=this,n=a.id;o.debounceEvent("checkBusyField-"+n,function(){o.checkBusyField(a),e.isFunction(o.params.onInput)&&o.params.onInput.call(o,t,a)})}),o.$form.on(o.addEventNS("keypress"),o.params.fields,function(e){o.modifyField(e,this)}),o.$form.on(o.addEventNS("keyup"),o.params.fields,function(e){o.maskField(e,this)}),o.params.validate&&o.$form.on(o.addEventNS("keyup focusout change validate"),o.params.fields,function(){if(o.params.realtimeValidation||o.errors.length){var e=this;o.debounceEvent("validate",function(){o.validateField(e),o.showErrors(),o.collectErrors()})}}),n.on(o.addEventNS("initForm"),function(){o.$form.find(o.params.fields).each(function(){o.checkBusyField(this)})}).triggerHandler(o.addEventNS("initForm")),o.$form.on(o.addEventNS("submit"),function(t){if(o.processing)t.preventDefault();else if(o.startProcessingForm(),o.params.validate&&(o.resetErrors(),o.$form.find(o.params.fields).each(function(){o.validateField(this)})),o.collectErrors())t.preventDefault(),o.$form.trigger(o.addEventNS("validationError"));else if(e.isFunction(o.params.onSubmit))o.params.onSubmit.call(o,t),o.stopProcessingForm();else if(e.isFunction(o.params.onSubmitAjax)){t.preventDefault();var a,n={url:o.formAction,type:o.formMethod,data:o.$form.serialize(),dataType:o.params.dataType,success:function(e){o.params.onSubmitAjax.call(o,e),o.stopProcessingForm()},error:function(e){o.$form.trigger(o.addEventNS("error"),e)}},i={data:new FormData(o.form),processData:!1,contentType:!1,cache:!1,xhr:function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){e.isFunction(o.params.onProgress)&&o.params.onProgress.call(o,t)},!0),t}};a=o.params.files?e.extend(!0,{},n,i):e.extend(!0,{},n),e.ajax(a)}else o.stopProcessingForm()}),o.$form.on(o.addEventNS("reset"),function(t){t.preventDefault(),o.stopProcessingForm(),o.refreshCaptcha(),o.$form.find(o.params.fields).each(function(){o.clearField(this)}),o.$form.find(o.params.fields).each(function(){o.checkBusyField(this)}),o.resetErrors(),o.hideErrors(),e.isFunction(o.params.onReset)&&o.params.onReset.call(o,t)}),o.$form.on(o.addEventNS("error"),function(t,a){o.stopProcessingForm(),e.isFunction(o.params.onError)&&o.params.onError.call(o,t,a)}),o.$form.on(o.addEventNS("validationError"),function(t,a){o.stopProcessingForm(),o.showErrors(),e.isFunction(o.params.onValidationError)&&o.params.onValidationError.call(o,t,a)}),o.$form.on(o.addEventNS("change"),function(t){e.isFunction(o.params.onChange)&&o.params.onChange.call(o,t)}),o.$captchaBtn.on(o.addEventNS("click"),function(e){e.preventDefault(),this.blur(),o.debounceEvent("refreshCaptcha",function(){o.refreshCaptcha()},300)})},o.init=function(){return o.form=t,o.$form=e(o.form),o.formData=o.$form.data(),o.formAction=o.form.action||"",o.formMethod=o.form.method||"get",o.params.noHTMLValidation&&o.$form.attr("novalidate","novalidate"),o.fieldsHash={},o.$captchaBtn=o.$form.find("."+o.params.fieldCaptchaRefreshClassName),o.resetErrors(),o.bindEvents(),e.isFunction(o.params.onInit)&&o.params.onInit.call(o),o},o.init()}(this,t))})}}(jQuery),function(e){"use strict";var t=e(window),a=27,o=37,n=39;e.fn.depotGallery=function(i){return e(this).each(function(){e.data(this,"depotGallery")||e.data(this,"depotGallery",new function(i,r){var s=this;return s.id=(new Date).getTime(),s.api={id:s.id},s.params=e.extend(!0,{ratio:400/600,preload:!1,contentsSelector:".js-depot-gallery-container",slideSelector:".js-depot-gallery-slide",resourceSelector:".js-depot-gallery-resource",resourceImageSelector:".js-depot-gallery-resource-image",activeClassName:"is-active",captionSelector:".js-depot-gallery-info",auto:{enabled:!1,delay:5e3,direction:"positive",holdOnHover:!0},viewport:{enabled:!0,captionEnabled:!0,captionInside:!0,selector:".js-depot-gallery-viewport",template:'<div class="gallery js-depot-gallery"><div class="gallery__viewport js-depot-gallery-viewport"><div class="gallery__buttons js-depot-gallery-buttons"><button class="gallery__button gallery__button_popup js-depot-gallery-button-popup" title="Увеличить"></button><button class="gallery__button gallery__button_prev js-depot-gallery-button-prev" title="Листать назад"></button><button class="gallery__button gallery__button_next js-depot-gallery-button-next" title="Листать вперед"></button><div class="gallery__bullets-wrapper js-depot-gallery-wrapper"><div class="gallery__bullets js-depot-gallery-bullets"><button class="gallery__bullet js-depot-gallery-bullet" title="Перейти к слайду"></button></div></div></div></div><div class="gallery__thumbs-wrapper"><div class="gallery__scroller-wrapper js-depot-scroller"><div class="gallery__scroller js-depot-scrolloverflow"><div class="gallery__thumbs js-depot-gallery-thumbs js-depot-scrollcontent"></div></div></div></div></div>',templateAddClass:null},buttons:{enabled:!1,setSize:!0,selector:".js-depot-gallery-buttons",next:{enabled:!1,selector:".js-depot-gallery-button-next"},prev:{enabled:!1,selector:".js-depot-gallery-button-prev"},popup:{enabled:!1,selector:".js-depot-gallery-button-popup"},bullets:{enabled:!1,selector:".js-depot-gallery-bullets",bulletSelector:".js-depot-gallery-bullet"}},thumbs:{enabled:!1,addClass:"bottom",selector:".js-depot-gallery-thumbs",thumbSelector:".js-depot-gallery-thumb",thumbResourceSelector:".js-depot-gallery-thumb-resource",resize:!0,rows:2,cols:2,onClick:null},popup:{enabled:!1,captionEnabled:!0,captionInside:!0,template:'<div class="gallery-popup js-depot-popup"><div class="gallery-popup__overlay js-depot-popup-overlay"></div><div class="gallery-popup__viewport js-depot-popup-viewport"><div class="gallery-popup__buttons js-depot-popup-buttons"><button class="gallery-popup__button gallery-popup__button_close js-depot-popup-button-close" title="Закрыть"></button><button class="gallery-popup__button gallery-popup__button_prev js-depot-popup-button-prev" title="Листать назад"></button><button class="gallery-popup__button gallery-popup__button_next js-depot-popup-button-next" title="Листать вперед"></button></div></div></div>',selector:".js-depot-popup-template",overlaySelector:".js-depot-popup-overlay",viewportSelector:".js-depot-popup-viewport",fullscreen:!1,buttons:{enabled:!1,selector:".js-depot-popup-buttons",next:{enabled:!1,selector:".js-depot-popup-button-next"},prev:{enabled:!1,selector:".js-depot-popup-button-prev"},close:{enabled:!1,selector:".js-depot-popup-button-close"}}},swipe:{enabled:!1,threshold:100,keepAlive:300},trackpad:{enabled:!0,delay:50},beforeShow:null,onInit:null,onResize:null,onChange:null,onPopupShow:null,onPopupHide:null},r),s.bindSwipe=function(e){e.on("touchstart.depotGallerySwipe-"+s.id+" MSPointerDown.depotGallerySwipe-"+s.id+" pointerdown.depotGallerySwipe-"+s.id,function(a){var o={active:!0,inital:{},current:{},delta:{},timeStart:(new Date).getTime(),timeout:void 0,threshold:s.params.swipe.threshold};a.originalEvent.touches&&a.originalEvent.touches.length?(o.inital.left=parseInt(a.originalEvent.touches[0].clientX,10),o.inital.top=parseInt(a.originalEvent.touches[0].clientY,10)):(o.inital.left=parseInt(a.clientX,10),o.inital.top=parseInt(a.clientY,10)),t.on("touchmove.depotGallerySwipe-"+s.id+" MSPointerMove.depotGallerySwipe-"+s.id+" pointermove.depotGallerySwipe-"+s.id,function(e){o.active&&(o.timeout&&window.clearTimeout(o.timeout),o.timeout=window.setTimeout(function(){t.triggerHandler("cancel.depotGallerySwipe-"+s.id)},s.params.swipe.keepAlive),e.originalEvent.touches&&e.originalEvent.touches.length?(o.current.left=parseInt(e.originalEvent.touches[0].clientX,10),o.current.top=parseInt(e.originalEvent.touches[0].clientY,10)):(o.current.left=parseInt(e.clientX,10),o.current.top=parseInt(e.clientY,10)),o.delta.left=o.inital.left-o.current.left,o.delta.top=o.inital.top-o.current.top,Math.abs(o.delta.left)>Math.abs(o.delta.top)?(o.direction="horizontal",o.delta.left>0?o.direction+="Right":o.direction+="Left"):(o.direction="vertical",o.delta.top<0?o.direction+="Top":o.direction+="Bottom"))}),t.on("touchend.depotGallerySwipe-"+s.id+" MSPointerUp.depotGallerySwipe-"+s.id+" pointerup.depotGallerySwipe-"+s.id+" cancel.depotGallerySwipe-"+s.id,function(a){t.off(".depotGallerySwipe-"+s.id),"cancel"!==a.type&&("horizontalRight"===o.direction&&s.showNext(e),"horizontalLeft"===o.direction&&s.showPrev(e),"verticalBottom"===o.direction&&s.hidePopup()),o=null})})},s.bindTrack=function(e){e.on("mousewheel wheel DOMMouseScroll",function(t){window.trackpadDelay||(s.trackpadDirection=s.getTrackpadDirection(t),s.trackpadDirection&&(s.trackpadDirection>0?s.showPrev(e):s.trackpadDirection<0&&s.showNext(e))),window.trackpadDelay&&window.clearTimeout(window.trackpadDelay),window.trackpadDelay=window.setTimeout(function(){window.trackpadDelay=!1},s.params.trackpad.delay)})},s.getTrackpadDirection=function(e){var t;return(e.originalEvent.wheelDeltaX||e.originalEvent.deltaX)&&(e.preventDefault(),t=e.originalEvent.wheelDeltaX||-1*e.originalEvent.deltaX||0),t},s.preloadImages=function(t,a,o){var n=t.length,i=0,r=[],s=0;a||(a="src"),n?t.each(function(t,a){var l=document.createElement("img");e.data(l,"original",a),l.onerror=function(){i+=1,s+=1,e.isFunction(o)&&o.call(e.data(this,"original"),i,n,s)},l.onload=function(){(this.complete||"complete"===this.readyState||4===this.readyState||this.width)&&(i+=1,e.isFunction(o)&&o.call(e.data(this,"original"),i,n,s))},r.push(l)}).each(function(t){var o=this,n=r[t],i=e(o).data(a);i||(i=o.src),window.setTimeout(function(){n.src=i,o.src=i},0)}):e.isFunction(o)&&o.call(null,i,n)},s.getResourceSize=function(e){var t={width:0,height:0},a=e.get(0);return a.naturalWidth&&a.naturalHeight?(t.width=a.naturalWidth,t.height=a.naturalHeight):(t.width=e.width(),t.height=e.height()),t},s.destroy=function(){return t.off(s.id),e.data(s.$container.get(0),"depotGallery",!1),s=null,!1},s.centerImage=function(e,t,a,o,n){var i,r;return t>n&&(t=n,r=0,i=(o-(e=n/a))/2),t<n&&(e=n/a,r=(n-(t=n))/2,i=0),e>o&&(e=o,r=(n-(t=o*a))/2,i=i||0),e<o&&(e=o,t=o*a,r=r||0,i=(o-e)/2),t>n&&(t=n,r=0,i=(o-(e=n/a))/2),{height:parseInt(t,10),width:parseInt(e,10),top:Math.ceil(r),left:Math.ceil(i)}},s.enterFullscreen=function(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},s.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},s.showNext=function(t){if(!s.isAnimated){var a,o,n,i,r,l=t.find(s.params.slideSelector+"."+s.params.activeClassName);s.$slides.each(function(){var t=e(this);if(a)return a=t.addClass(s.params.activeClassName).clone(),!1;t.is("."+s.params.activeClassName)&&(t.removeClass(s.params.activeClassName),a=!0)}),a&&a.length||(a=s.$slides.first().addClass(s.params.activeClassName).clone()),s.preloadImages(a.find("img"),s.popupActive?"full":"src",function(o,n){o===n&&(l.css({"z-index":2}).before(a.removeClass(s.params.activeClassName).css({"z-index":1})),s.resizeSlide(t,a,s.popupActive),a.fadeOut(0),s.isAnimated=!0,l.fadeOut(400,function(){l.remove(),s.isAnimated=!1,s.popupActive?s.$popupSlideActive=a:s.$viewportActive=a}),e.isFunction(s.params.beforeShow)&&s.params.beforeShow.call(s,s.$gallery,a),a.fadeIn(400,function(){a.addClass(s.params.activeClassName),e.isFunction(s.params.onChange)&&s.params.onChange.call(s,s.$gallery,a)}))}),!s.popupActive&&s.params.buttons.bullets.enabled&&((n=(o=s.$bulletsContainer.find(s.params.buttons.bullets.bulletSelector+"."+s.params.activeClassName)).next()).length||(n=s.$bulletsContainer.find(s.params.buttons.bullets.bulletSelector).first()),o.removeClass(s.params.activeClassName),n.addClass(s.params.activeClassName)),!s.popupActive&&s.params.thumbs.enabled&&((r=(i=s.$thumbsContainer.find(s.params.thumbs.thumbSelector+"."+s.params.activeClassName)).next()).length||(r=s.$thumbsContainer.find(s.params.thumbs.thumbSelector).first()),i.removeClass(s.params.activeClassName),r.addClass(s.params.activeClassName))}return s},s.showPrev=function(t){if(!s.isAnimated){var a,o,n,i,r,l=t.find(s.params.slideSelector+"."+s.params.activeClassName);s.$slides.each(function(){var t=e(this);if(t.is("."+s.params.activeClassName))return t.removeClass(s.params.activeClassName),!1;a=t}),a||(a=s.$slides.last()),a=a.addClass(s.params.activeClassName).clone(),s.preloadImages(a.find("img"),s.popupActive?"full":"src",function(o,n){o===n&&(l.css({"z-index":2}).before(a.removeClass(s.params.activeClassName).css({"z-index":1})),s.resizeSlide(t,a,s.popupActive),a.fadeOut(0),s.isAnimated=!0,l.fadeOut(400,function(){l.remove(),s.isAnimated=!1,s.popupActive?s.$popupSlideActive=a:s.$viewportActive=a}),e.isFunction(s.params.beforeShow)&&s.params.beforeShow.call(s,s.$gallery,a),a.fadeIn(400,function(){a.addClass(s.params.activeClassName),e.isFunction(s.params.onChange)&&s.params.onChange.call(s,s.$gallery,a)}))}),!s.popupActive&&s.params.buttons.bullets.enabled&&((n=(o=s.$bulletsContainer.find(s.params.buttons.bullets.bulletSelector+"."+s.params.activeClassName)).prev()).length||(n=s.$bulletsContainer.find(s.params.buttons.bullets.bulletSelector).last()),o.removeClass(s.params.activeClassName),n.addClass(s.params.activeClassName)),!s.popupActive&&s.params.thumbs.enabled&&((r=(i=s.$thumbsContainer.find(s.params.thumbs.thumbSelector+"."+s.params.activeClassName)).prev()).length||(r=s.$thumbsContainer.find(s.params.thumbs.thumbSelector).last()),i.removeClass(s.params.activeClassName),r.addClass(s.params.activeClassName))}return s},s.show=function(t,a){if(!s.isAnimated){var o,n,i,r,l,c=t.find(s.params.slideSelector+"."+s.params.activeClassName);(o=e(s.$slides.get(a-1))).length&&!o.is("."+s.params.activeClassName)&&(s.$slides.each(function(){e(this).removeClass(s.params.activeClassName)}),o=o.addClass(s.params.activeClassName).clone(),s.preloadImages(o.find("img"),s.popupActive?"full":"src",function(a,n){a===n&&(c.css({"z-index":2}).before(o.removeClass(s.params.activeClassName).css({"z-index":1})),s.resizeSlide(t,o,s.popupActive),o.fadeOut(0),s.isAnimated=!0,c.fadeOut(400,function(){c.remove(),s.isAnimated=!1,s.popupActive?s.$popupSlideActive=o:s.$viewportActive=o}),e.isFunction(s.params.beforeShow)&&s.params.beforeShow.call(s,s.$gallery,o),o.fadeIn(400,function(){o.addClass(s.params.activeClassName),e.isFunction(s.params.onChange)&&s.params.onChange.call(s,s.$gallery,o)}))}),!s.popupActive&&s.params.buttons.bullets.enabled&&(n=s.$bulletsContainer.find(s.params.buttons.bullets.bulletSelector+"."+s.params.activeClassName),(i=e(s.$bulletsContainer.find(s.params.buttons.bullets.bulletSelector).get(a-1))).length&&(n.removeClass(s.params.activeClassName),i.addClass(s.params.activeClassName))),!s.popupActive&&s.params.thumbs.enabled&&(r=s.$thumbsContainer.find(s.params.thumbs.thumbSelector+"."+s.params.activeClassName),(l=e(s.$thumbsContainer.find(s.params.thumbs.thumbSelector).get(a-1))).length&&(r.removeClass(s.params.activeClassName),l.addClass(s.params.activeClassName))))}return s},s.showPopup=function(){s.popupActive||(s.tmp$slides=s.$slides,s.$slides=s.tmp$slides.clone(),s.$popupSlideActive=s.getActive(),s.$popupViewport.prepend(s.$popupSlideActive),s.params.popup.fullscreen&&s.enterFullscreen(s.$popup.get(0)),s.preloadImages(s.$popupSlideActive.find("img"),"full",function(t,a){t===a&&(s.popupActive=!0,s.$popup.css("display","block"),s.resizeViewport(s.$popupViewport,!0),s.resizeSlide(s.$popupViewport,s.$popupSlideActive,s.popupActive),s.$popup.fadeOut(0).fadeIn(750),e.isFunction(s.params.onPopupShow)&&s.params.onPopupShow.call(s,s.$container,s.getActive(),s.$popupViewport))}),e(document).on("keyup.depotGalleryPopup",function(e){var t=e.which||e.keyCode;t===a&&s.hidePopup(),t===o&&s.showPrev(s.$popupViewport),t===n&&s.showNext(s.$popupViewport)}))},s.hidePopup=function(t){s.popupActive&&(s.popupActive=!1,s.params.popup.fullscreen&&s.exitFullscreen(),s.$popup.fadeOut(t?0:300,function(){s.$popupViewport.find(s.params.slideSelector).remove(),s.$slides=s.tmp$slides,s.tmp$slides=null}),e.isFunction(s.params.onPopupHide)&&s.params.onPopupHide.call(s,s.$container,s.getActive()),e(document).off(".depotGalleryPopup"))},s.getActive=function(){return s.$slides.each(function(){var t=e(this);if(t.is("."+s.params.activeClassName))return s.$activeSlide=t,!1}),s.$activeSlide||(s.$activeSlide=s.$slides.first(),s.$activeSlide.addClass(s.params.activeClassName)),s.$activeSlide},s.insertActive=function(e,t){return s.$viewportActive=t.clone(),s.preloadImages(s.$viewportActive.find("img"),s.popupActive?"full":"src",function(t,a){t===a&&e.prepend(s.$viewportActive)}),s},s.initViewport=function(){return s.params.viewport.enabled?(s.$viewport=s.$gallery.find(s.params.viewport.selector),s.insertActive(s.$viewport,s.getActive())):s.getActive(),s},s.initThumbs=function(){return s.params.thumbs.enabled&&s.slidesCount>0?(s.$thumbs=s.$content.find(s.params.thumbs.thumbSelector).clone(),s.$thumbsContainer=s.$gallery.find(s.params.thumbs.selector),s.params.thumbs.addClass&&s.$thumbsContainer.addClass(s.params.thumbs.addClass),s.preloadImages(s.$thumbs.find("img"),"src"),s.$thumbs.each(function(t){s.$thumbsContainer.append(e(this).data("slide",t+1))}),s.$activeThumb=s.$thumbsContainer.find(s.params.thumbs.thumbSelector+"."+s.params.activeClassName),s.$activeThumb.length||(s.$activeThumb=s.$thumbsContainer.find(s.params.thumbs.thumbSelector).first().addClass(s.params.activeClassName)),s.$thumbsContainer.on("click",s.params.thumbs.thumbSelector,function(t){t.preventDefault(),e(this).is("."+s.params.activeClassName)||s.show(s.$viewport,e(this).data("slide")),e.isFunction(s.params.thumbs.onClick)&&s.params.thumbs.onClick.apply(this,[t])})):s.$gallery.find(s.params.thumbs.selector).remove(),s},s.initButtons=function(){return s.params.viewport.enabled&&s.params.buttons.enabled&&s.slidesCount>0?(s.$buttonContainer=s.$gallery.find(s.params.buttons.selector),s.params.buttons.prev.enabled&&s.slidesCount>1?(s.$buttonPrev=s.$gallery.find(s.params.buttons.prev.selector),s.$buttonPrev.on("click",function(e){e.preventDefault(),this.blur(),s.isAnimated||s.showPrev(s.$viewport)})):s.$gallery.find(s.params.buttons.prev.selector).remove(),s.params.viewport.enabled&&s.params.buttons.next.enabled&&s.slidesCount>1?(s.$buttonNext=s.$gallery.find(s.params.buttons.next.selector),s.$buttonNext.on("click",function(e){e.preventDefault(),this.blur(),s.isAnimated||s.showNext(s.$viewport)})):s.$gallery.find(s.params.buttons.next.selector).remove(),s.params.buttons.popup.enabled?(s.$buttonPopup=s.$gallery.find(s.params.buttons.popup.selector),s.$buttonPopup.on("click",function(e){e.preventDefault(),this.blur(),s.isAnimated||s.showPopup()}),s.api.showPopup=s.showPopup):s.$gallery.find(s.params.buttons.popup.selector).remove(),s.params.viewport.enabled&&s.params.buttons.bullets.enabled&&s.slidesCount>1?(s.$bulletsContainer=s.$gallery.find(s.params.buttons.bullets.selector),s.$bullet=s.$bulletsContainer.find(s.params.buttons.bullets.bulletSelector).detach(),s.$slides.each(function(t){var a=t+1,o=s.$bullet.clone().data("slide",a).text(a);e(this).is("."+s.params.activeClassName)&&o.addClass(s.params.activeClassName),s.$bulletsContainer.append(o)}),s.$bulletsContainer.on("click",s.params.buttons.bullets.bulletSelector,function(t){t.preventDefault(),this.blur(),s.isAnimated||e(this).is("."+s.params.activeClassName)||s.show(s.$viewport,e(this).data("slide"))}),s.api.show=s.show):s.$gallery.find(s.params.buttons.bullets.selector).remove(),s.api.showNext=s.showNext,s.api.showPrev=s.showPrev):s.$gallery.find(s.params.buttons.selector).remove(),s},s.initPopup=function(){s.params.popup.enabled&&(s.params.popup.template?(s.popupTemplate=s.params.popup.template,s.$popup=e(s.popupTemplate)):s.$popup=e(s.params.popup.selector),s.$popup.appendTo(e("body")),s.$popupOverlay=s.$popup.find(s.params.popup.overlaySelector),s.$popupViewport=s.$popup.find(s.params.popup.viewportSelector),s.params.popup.buttons.enabled&&(s.$popupButtons=s.$popup.find(s.params.popup.buttons.selector),s.params.popup.buttons.prev.enabled&&s.slidesCount>1?s.$popupButtons.on("click",s.params.popup.buttons.prev.selector,function(e){e.preventDefault(),s.showPrev(s.$popupViewport)}):s.$popupButtons.find(s.params.popup.buttons.prev.selector).remove(),s.params.popup.buttons.next.enabled&&s.slidesCount>1?s.$popupButtons.on("click",s.params.popup.buttons.next.selector,function(e){e.preventDefault(),s.showNext(s.$popupViewport)}):s.$popupButtons.find(s.params.popup.buttons.next.selector).remove(),s.params.popup.buttons.close.enabled?s.$popupButtons.on("click",s.params.popup.buttons.close.selector,function(e){e.preventDefault(),s.hidePopup()}):s.$popupButtons.find(s.params.popup.buttons.close.selector).remove()),s.params.swipe.enabled&&s.bindSwipe(s.$popupViewport),s.params.trackpad.enabled&&s.bindTrack(s.$popupViewport),s.$popupOverlay.on("click",function(e){e.preventDefault(),s.hidePopup()}),s.params.popup.fullscreen&&e(document).on("webkitfullscreenchange mozfullscreenchange msfullscreenchange fullscreenchange",function(e){document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullScreenElement||document.fullScreenElement||s.popupActive&&s.hidePopup()}),s.api.showPopup=s.showPopup)},s.resizeViewport=function(e,a){var o={};return e.css({width:"",height:""}),e.find(s.params.slideSelector).css({height:"",width:"",top:"",left:""}),s.viewportWidth=e.width(),a?s.popupActive&&a&&(s.viewportWidth=e.width(),s.windowWidth=t.innerWidth(),s.windowHeight=t.innerHeight(),s.params.popup.fullscreen&&(s.windowWidth=window.screen.width||s.windowWidth,s.windowHeight=window.screen.height||s.windowHeight),s.windowRatio=s.windowHeight/s.windowWidth,s.viewportHeight=s.viewportWidth*s.windowRatio,s.viewportHeight>s.windowHeight&&(s.viewportHeight=s.windowHeight,s.viewportWidth=s.windowHeight/s.windowRatio),s.viewportTop=(s.windowHeight-s.viewportHeight)/2,s.viewportLeft=(s.windowWidth-s.viewportWidth)/2,o={width:s.viewportWidth,height:s.viewportHeight,top:s.viewportTop,left:s.viewportLeft}):s.params.ratio?(s.viewportHeight=s.viewportWidth*s.params.ratio,o={width:s.viewportWidth,height:s.viewportHeight}):o={width:e.width(),height:e.height()},e.css(o).data(o),s},s.resizeSlide=function(e,a,o){var n,i,r,l;o?(n=e.find(s.params.popup.buttons.selector),i=s.params.popup.captionEnabled,r=s.params.popup.captionInside):(n=e.find(s.params.buttons.selector),i=s.params.viewport.captionEnabled,r=s.params.viewport.captionInside),s.viewportWidth=e.data("width")||0,s.viewportHeight=e.data("height")||0,s.viewportTop=e.data("top")||0,s.$slideActiveResource=a.find(s.params.resourceSelector),s.$slideActiveCaption=a.find(s.params.captionSelector),s.$slideActiveResource.css({width:"",height:"",padding:"",margin:""}),s.$slideActiveResource.is("img")?(l=s.getResourceSize(s.$slideActiveResource),s.resourceOriginalWidth=l.width,s.resourceOriginalHeight=l.height):(s.$slideActiveResourceImage=a.find(s.params.resourceImageSelector),s.$slideActiveResourceImage.length&&(s.$slideActiveResourceImage.css({width:"",height:"",padding:"",margin:""}),l=s.getResourceSize(s.$slideActiveResourceImage),s.resourceOriginalWidth=l.width,s.resourceOriginalHeight=l.height)),s.resourceOriginalRatio=s.resourceOriginalHeight/s.resourceOriginalWidth||s.params.ratio,a.css({width:s.viewportWidth}),i&&r&&s.$slideActiveCaption.length?s.captionHeight=s.$slideActiveCaption.outerHeight(!0):s.captionHeight=0,!i&&s.$slideActiveCaption.length&&s.$slideActiveCaption.remove(),s.resourceAvailableWidth=s.viewportWidth,o?s.viewportHeight+s.captionHeight>=t.innerHeight()?s.resourceAvailableHeight=s.viewportHeight-s.captionHeight:(s.resourceAvailableHeight=s.viewportHeight,e.css({height:s.viewportHeight+s.captionHeight,top:s.viewportTop-s.captionHeight/2})):s.resourceAvailableHeight=s.viewportHeight,s.resourceNewWidth=s.resourceAvailableWidth,s.resourceNewHeight=s.resourceAvailableWidth*s.resourceOriginalRatio,s.resourceNewTop=0,s.resourceNewLeft=0,s.centred=s.centerImage(s.resourceNewWidth,s.resourceNewHeight,s.resourceOriginalRatio,s.resourceAvailableWidth,s.resourceAvailableHeight),s.resourceNewWidth=s.centred.width,s.resourceNewHeight=s.centred.height,s.resourceNewTop=s.centred.top,s.resourceNewLeft=s.centred.left,s.$slideActiveResource.is("img")?s.$slideActiveResource.css({width:s.resourceNewWidth,height:s.resourceNewHeight,padding:s.resourceNewTop+"px 0"}):(s.$slideActiveResource.css({width:s.resourceNewWidth,height:s.resourceNewHeight,padding:s.resourceNewTop+"px 0"}),a.css({height:s.resourceAvailableHeight+s.captionHeight}),s.$slideActiveResourceImage.length&&s.$slideActiveResourceImage.css({width:s.resourceNewWidth,height:s.resourceNewHeight})),o?a.css({width:s.resourceNewWidth,height:s.resourceAvailableHeight+s.captionHeight,margin:"0 "+s.resourceNewLeft+"px"}):a.css({width:s.resourceNewWidth,height:s.resourceAvailableHeight+s.captionHeight,padding:"0 "+s.resourceNewLeft+"px"}),o||e.css({height:s.resourceAvailableHeight+s.captionHeight}),n.length&&s.params.buttons.setSize&&n.css({width:s.resourceAvailableWidth,height:s.resourceAvailableHeight})},s.resizeThumbs=function(t){s.params.thumbs.enabled&&s.params.thumbs.resize&&s.slidesCount>1&&(s.viewportWidth=t.data("width"),s.viewportHeight=t.data("height"),s.thumbWidth=s.viewportWidth/(s.params.thumbs.cols||1),s.thumbHeight=s.viewportHeight/(s.params.thumbs.rows||1),s.$thumbsContainer.find(s.params.thumbs.thumbSelector).each(function(){var t,a,o,n,i=e(this),r=i.find(s.params.thumbs.thumbResourceSelector);i.css({height:""}),r.length&&(r.css({height:"",width:"",top:"",left:""}),t=r.width(),a=r.height()/t,o=s.thumbWidth,n=s.thumbWidth*a,r.css(s.centerImage(o,n,a,s.thumbWidth,s.thumbHeight))),i.css({height:s.thumbHeight})}))},s.resize=function(){s.params.viewport.enabled&&(s.$slideActive=s.$viewportActive||s.$viewport.find(s.params.slideSelector+"."+s.params.activeClassName),s.resizeViewport(s.$viewport,!1),s.resizeSlide(s.$viewport,s.$slideActive,!1)),s.params.popup.enabled&&s.popupActive&&(s.resizeViewport(s.$popupViewport,!0),s.resizeSlide(s.$popupViewport,s.$popupSlideActive,!0)),s.params.thumbs.enabled&&s.resizeThumbs(s.$viewport),e.isFunction(s.params.onResize)&&s.params.onResize.call(s,s.$gallery,s.$slideActive)},s.stopInterval=function(){s.autoplayInterval&&window.clearInterval(s.autoplayInterval)},s.startInterval=function(){s.slidesCount>1&&(s.autoplayInterval&&window.clearInterval(s.autoplayInterval),s.autoplayInterval=window.setInterval(function(){s.isAnimated||(!s.params.auto.holdOnHover||s.params.auto.holdOnHover&&!s.inFocus)&&("negative"===s.params.auto.direction?s.showPrev(s.$viewport):"positive"===s.params.auto.direction&&s.showNext(s.$viewport))},s.params.auto.delay))},s.init=function(){return s.$container=e(i),s.params.viewport.enabled&&s.params.viewport.template?(s.galleryTemplate=s.params.viewport.template,s.$gallery=e(s.galleryTemplate),s.params.viewport.templateAddClass&&s.$gallery.addClass(s.params.templateAddClass),s.$content=s.$container.find(s.params.contentsSelector),s.$content.detach(),s.$container.append(s.$gallery)):(s.$content=s.$container.find(s.params.contentsSelector),s.$gallery=s.$container),s.$slides=s.$content.find(s.params.slideSelector),s.slidesCount=s.$slides.length,s.initViewport(),s.initButtons(),s.initThumbs(),s.initPopup(),s.params.viewport.enabled&&s.params.swipe.enabled&&s.bindSwipe(s.$viewport),s.params.viewport.enabled&&s.params.trackpad.enabled&&s.bindTrack(s.$viewport),s.params.viewport.enabled&&s.params.auto.enabled&&(s.$gallery.on("mouseover",function(){s.inFocus=!0,s.stopInterval()}),s.$gallery.on("mouseleave",function(){s.inFocus=!1,s.startInterval()})),t.on("init."+s.id+"resize."+s.id+"orientationchange."+s.id,function(){window.clearTimeout(s.resizeTimeout),s.resizeTimeout=window.setTimeout(s.resize,30)}).trigger("init."+s.id),e.isFunction(s.params.beforeShow)&&s.params.beforeShow.call(s,s.$container,s.getActive()),s.params.preload&&s.preloadImages(s.$slides.find("img"),"src"),s.params.auto.enabled&&s.startInterval(),s.api.resize=s.resize,s.api.centerImage=s.centerImage,s.api.preloadImages=s.preloadImages,s.api.destroy=s.destroy,s.api.time=(new Date).getTime()-s.id+"ms",e.isFunction(s.params.onInit)&&s.params.onInit.call(s,s.$container,s.getActive()),s.api},s.init()}(this,i))})}}(jQuery),function(e){"use strict";function t(){var t=this;return e(window).on("hashchange.depotHash",function(a){e.each(t._callbacks,function(o,n){e.isFunction(n)&&n.call(t,a.originalEvent)})}),this}t.prototype={_callbacks:[],onChange:function(t){return e.isFunction(t)&&this._callbacks.push(t),this},offChange:function(e){return-1!==this._callbacks.indexOf(e)&&this._callbacks.splice(this._callbacks.indexOf(e),1),this},get:function(){return window.location.hash.replace(/^[#]?[!]?/,"")},set:function(e){var t="#!";return e&&(t+=e),window.location.hash=t,t},add:function(e){if(!this.has(e)){var t=this.toArray();return t.push(e),this.set(t.join("&"))}return!1},replace:function(e,t){var a=this.indexOf(e),o=this.indexOf(t);if(-1!==a&&-1===o){var n=this.toArray();return n[a]=t,this.set(n.join("&"))}return-1!==a&&-1!==o&&a!==o?this.remove(e):-1===a&&-1===o&&this.add(t)},remove:function(e){var t=this.indexOf(e);if(-1!==t){var a=this.toArray();return a.splice(t,1),this.set(a.join("&"))}return!1},clear:function(){return this.set()},toArray:function(){var e=[],t=this.get();return t&&(e=t.split("&")),e},indexOf:function(e){var t=this.toArray();return e&&t.length?t.indexOf(e.toString()):-1},has:function(e){return-1!==this.indexOf(e)},getMatched:function(t,a){var o=this.toArray(),n=[];return e.each(o,function(e,a){t.test(a)&&n.push(a)}),a&&e.isFunction(a)&&e.each(n,a),n},removeMatched:function(t){var a=this.toArray(),o=[];return e.each(a,function(e,a){t.test(a)||o.push(a)}),this.set(o.join("&"))}},e.extend({depotHash:new t})}(jQuery),function(e){"use strict";function t(t,a){var o=this;return o.id=(new Date).getTime(),o.eventNS=".depotLoaderMore-"+o.id,o.defaults={buttonClassName:"js-depot-load-more-button",containerClassName:"js-depot-load-more-here",loadingClassName:"is-loading",method:"get",dataType:"html",startPage:2,extendUrlParams:!0,onInit:null,beforeRequest:null,renderResponse:null,afterRequest:null,onCancel:null,onError:null},o.params=e.extend(!0,o.defaults,a),o.$wrapper=t,o.$button=o.$wrapper.find("."+o.params.buttonClassName),o.$container=o.$wrapper.find("."+o.params.containerClassName),o.moreUrl=o.$button.data("more-url")||"",o.data={page:o.params.startPage},o.$wrapper.on("click","."+o.params.buttonClassName,function(e){e.preventDefault(),t.trigger("depotLoadMore")}),o.$wrapper.on("depotLoadMore",function(t){e.isFunction(o.params.beforeRequest)&&o.params.beforeRequest.call(o,t,o.$container,o.$button),o.loadMore()}),o.$wrapper.on("depotLoadMoreCancel",function(t){o.loadCancel(),e.isFunction(o.params.onCancel)&&o.params.onCancel.call(o,t)}),e.isFunction(o.params.onInit)&&o.params.onInit.call(o),o}t.prototype.getURLParams=function(){var e={},t=window.location.search;if(t.length){var a=t.replace("?","").split("&"),o=a.length;if(o)for(var n=0;n<o;n+=1){var i=a[n].split("="),r=i[0],s=i[1];isNaN(s)||(s=parseFloat(s)),e[r]?e[r]instanceof Array?e[r].push(s):e[r]=[e[r],s]:e[r]=s}}return e},t.prototype.loadCancel=function(){this.request&&this.request.abort(),this.$button.removeClass(this.params.loadingClassName)},t.prototype.loadMore=function(){var t=this;t.loadingInProgress||(t.loadingInProgress=!0,t.moreData=t.$button.data("more-data")||{},t.params.extendUrlParams&&t.moreUrl?t.requestData=e.extend(!0,t.getURLParams(),t.data,t.moreData):t.requestData=e.extend(!0,t.data,t.moreData),t.$button.addClass(t.params.loadingClassName),t.request=e.ajax({url:t.moreUrl,type:t.params.type,dataType:t.params.dataType,data:decodeURIComponent(e.param(t.requestData,!0)),success:function(a){a&&(e.isFunction(t.params.renderResponse)?t.params.renderResponse.call(t,a,t.$container,t.$button):t.$container.append(a),t.requestData.page?(t.requestData.page+=1,t.data.page=t.requestData.page):t.data.page+=1),t.loadingInProgress=!1,t.$button.removeClass(t.params.loadingClassName),e.isFunction(t.params.afterRequest)&&t.params.afterRequest.call(t,a,t.$container,t.$button)},error:function(a){t.loadingInProgress=!1,t.$button.removeClass(t.params.loadingClassName),e.isFunction(t.params.onError)&&t.params.onError.call(t,a)}}))},e.fn.depotLoaderMore=function(a){return e(this).each(function(){e.data(this,"depotLoaderMore")||e.data(this,"depotLoaderMore",new t(e(this),a))})}}(jQuery),function(e){"use strict";var t=e(window),a=e(document);function o(e){return e.targetTouches&&e.targetTouches.length?{clientX:parseInt(e.targetTouches[0].clientX,10),clientY:parseInt(e.targetTouches[0].clientY,10)}:e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length?{clientX:parseInt(e.originalEvent.touches[0].clientX,10),clientY:parseInt(e.originalEvent.touches[0].clientY,10)}:{clientX:parseInt(e.clientX,10),clientY:parseInt(e.clientY,10)}}e.fn.depotPanoram=function(n){return e(this).each(function(i,r){var s,l,c,p={};return p.timeStamp=(new Date).getTime(),p.pluginName="depotPanoram",p.eventNameSpace=(s=".${pluginName}-${timeStamp}",l=p,c=new RegExp("\\$\\{([^$}]+)\\}","gm"),l?s.replace(c,function(e,t){var a=l[t],o=e;return void 0===a||"string"!=typeof a&&"number"!=typeof a||(o=a),o}):s),p.defaults={buttonSelector:".js-panoram-play",progressSelector:".js-panoram-progress",fullscreenSelector:".js-panoram-fullscreen",textureParam:"panoram",swfFallbackParam:"fallback",readyClassName:"is-ready",progressClassName:"is-progress",fullscreenClassName:"is-fullscreen",sensor:!1,rotation:!1,debounce:300,extend:null,onInit:null,onProgress:null},p.params=e.extend(!0,p.defaults,n),p.cache={},p.state={},p.addEventNS=function(t,a){a||(a="");var o=t.split(" "),n=[];return e.each(o,function(){n.push(this+p.eventNameSpace+a)}),n.join(" ")},p.debounceEvent=function(t,a,o){e.isFunction(a)&&(p.debounceTimers||(p.debounceTimers={}),p.debounceTimers[t]?(window.clearTimeout(p.debounceTimers[t]),p.debounceTimers[t]=window.setTimeout(function(){p.debounceTimers[t]=!1,a.call(p)},o||p.params.debounce)):(a.call(p),p.debounceTimers[t]=window.setTimeout(function(){p.debounceTimers[t]=!1},o||p.params.debounce)))},p.throttleEvent=function(t,a,o){e.isFunction(a)&&(p.throttleTimers||(p.throttleTimers={}),p.throttleTimers[t]||(a.call(p),p.throttleTimers[t]=window.setTimeout(function(){p.throttleTimers[t]=!1},o||p.params.debounce)))},p.init=function(){return p.params.extend&&e.isPlainObject(p.params.extend)&&(p=e.extend(!0,p,p.params.extend)),p.$container=e(r),p.$progress=p.$container.find(p.params.progressSelector),p.texture=p.$container.data(p.params.textureParam),p.fallback=p.$container.data(p.params.swfFallbackParam),p.radius=500,p.$output=e(".js-panoram-output"),p.hasWebGL=p.checkWebGL(),p.hasFlashPlayer=p.checkFlashPlayer(),p.bindEvents(),e.data(r,p.pluginName,p),p.params.onInit&&e.isFunction(p.params.onInit)&&p.params.onInit.call(p),p},p.checkWebGL=function(){return Modernizr&&Modernizr.webgl},p.checkFlashPlayer=function(){var e=!1;try{e=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(t){e=void 0!==navigator.mimeTypes["application/x-shockwave-flash"]}return e},p.play=function(){if(!p.isPlaying)if(p.resize(),p.isPlaying=!0,p.hasWebGL)p.$canvas&&p.$canvas.length&&(p.$canvas.remove(),window.cancelAnimationFrame(p.animation)),p.alpha=0,p.beta=0,p.gamma=0,p.renderer=new THREE.WebGLRenderer,p.renderer.setPixelRatio(window.devicePixelRatio||1),p.renderer.setSize(p.containerWidth,p.containerHeight),p.$canvas=e(p.renderer.domElement),p.$container.append(p.$canvas),p.scene=new THREE.Scene,p.camera=new THREE.PerspectiveCamera(50,p.containerWidth/p.containerHeight,.1,2e3),p.camera.target=new THREE.Vector3(0,0,0),p.sphere=new THREE.SphereGeometry(p.radius,1e3,5),p.sphere.scale(-1,1,1),p.setTexture(p.texture);else if(p.hasFlashPlayer){p.$swfObject&&p.$swfObject.length&&p.$swfObject.remove(),p.$container.addClass(p.params.progressClassName);var t=function(t,a,o,n,i){var r={type:"application/x-shockwave-flash",name:n,id:n,width:a,height:o},s={wmode:"transparent",play:"true",quality:"high",allowscriptaccess:"always",menu:"false",bgcolor:"#FFFFFF"};window.ActiveXObject?(r.classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",s.movie=t):r.data=t;var l=document.createElementNS("http://www.w3.org/1999/xhtml","object");r&&"object"==typeof r&&e.each(r,function(e,t){l.setAttribute(e,t)}),s&&"object"==typeof s&&e.each(s,function(e,t){var a=document.createElementNS("http://www.w3.org/1999/xhtml","param");a.setAttribute("name",e),a.setAttribute("value",t),l.appendChild(a)});var c=document.createElement("div");c.innerHTML=l.outerHTML;var p=c.firstChild;return c.removeChild(p),p}(p.fallback,p.containerWidth,p.containerHeight,"swfObject");p.$swfObject=e(t),p.$container.append(p.$swfObject),p.$container.removeClass(p.params.progressClassName).addClass(p.params.readyClassName)}else p.showError("Для просмотра панорам необходима поддержка WebGL, или Adobe Flash Player версии 9 или выше.");return p},p.reset=function(){p.isPlaying=!1,p.$container.removeClass(p.params.readyClassName),p.$container.removeClass(p.params.progressClassName),p.$canvas&&p.$canvas.length&&p.$canvas.remove(),p.$swfObject&&p.$swfObject.length&&p.$swfObject.remove(),p.$errorMessage&&p.$errorMessage.length&&p.$errorMessage.remove(),p.animation&&window.cancelAnimationFrame(p.animation),p.touchWait&&window.clearTimeout(p.touchWait),p.debounceTimers&&e.each(p.debounceTimers,function(e){window.clearTimeout(p.debounceTimers[e])})},p.destroy=function(){p.reset(),t.off(p.eventNameSpace),p.$container.off(p.eventNameSpace)},p.setTexture=function(t){p.sphereMaterial=p.sphereMaterial||new THREE.MeshBasicMaterial,p.textureLoader=p.textureLoader||new THREE.TextureLoader,p.$container.addClass(p.params.progressClassName),p.textureLoader.load(t,function(e){p.sphereMaterial&&(p.sphereMaterial.map=e,p.sphereMesh=new THREE.Mesh(p.sphere,p.sphereMaterial),p.scene.add(p.sphereMesh),p.render(),p.$container.removeClass(p.params.progressClassName).addClass(p.params.readyClassName))},function(t){e.isFunction(p.params.onProgress)&&p.params.onProgress.call(p,t.loaded,t.total)},function(){p.showError()})},p.render=function(){return p.beta=Math.max(-90,Math.min(90,p.beta)),p.camera.target.x=p.radius*Math.sin(THREE.Math.degToRad(90-p.beta))*Math.cos(THREE.Math.degToRad(p.alpha-90)),p.camera.target.y=p.radius*Math.cos(THREE.Math.degToRad(90-p.beta)),p.camera.target.z=p.radius*Math.sin(THREE.Math.degToRad(90-p.beta))*Math.sin(THREE.Math.degToRad(p.alpha-90)),p.camera.lookAt(p.camera.target),p.params.rotation&&p.sphereMesh&&(p.sphereMesh.rotation.x=-1*THREE.Math.degToRad(p.gamma)),p.renderer.render(p.scene,p.camera),p},p.resize=function(){p.containerWidth=parseFloat(p.$container.outerWidth()),p.containerHeight=parseFloat(p.$container.outerHeight()),p.hasWebGL?(p.camera&&(p.camera.aspect=p.containerWidth/p.containerHeight,p.camera.updateProjectionMatrix()),p.renderer&&(p.renderer.setSize(p.containerWidth,p.containerHeight),p.render())):p.hasFlashPlayer&&p.$swfObject&&p.$swfObject.length&&(p.$swfObject.attr("width",p.containerWidth),p.$swfObject.attr("height",p.containerHeight))},p.getAverageFromArray=function(t){var a=0;return e.each(t,function(){a+=parseFloat(this)}),a?a/t.length:0},p.cacheOrientation=function(e){p.cache.busy||(p.cache.busy=!0,p.cache.alpha=[],p.cache.beta=[],p.cache.gamma=[]);var t=e.originalEvent;return isNaN(t.alpha)||null===t.alpha||p.cache.alpha.push(-1*t.alpha),isNaN(t.beta)||null===t.beta||p.cache.beta.push(t.beta-90),isNaN(t.gamma)||null===t.gamma||p.cache.gamma.push(t.gamma),p},p.handleOrientation=function(){p.cache.busy=!1,!p.touchInput&&p.isPlaying&&(p.cache.alpha&&p.cache.alpha.length&&(p.alpha=Math.round(p.getAverageFromArray(p.cache.alpha))),p.cache.beta&&p.cache.beta.length&&(p.beta=Math.round(p.getAverageFromArray(p.cache.beta))),p.cache.gamma&&p.cache.gamma.length&&(p.gamma=Math.round(p.getAverageFromArray(p.cache.gamma))),p.render())},p.showError=function(t){t||(t="Во время загрузки панарамы возникла ошибка"),p.$errorMessage=e('<div class="error-message"><p>'+t+"</p></div>"),p.$container.append(p.$errorMessage),p.$container.removeClass(p.params.progressClassName).addClass(p.params.readyClassName)},p.checkFullscreen=function(){return setTimeout(function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?(p.state.fullscreen=!0,p.$container.addClass(p.params.fullscreenClassName)):(p.state.fullscreen=!1,p.$container.removeClass(p.params.fullscreenClassName)),p.resize()},300),p},p.enterFullscreen=function(){var e=p.$container.get(0);return e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),p.checkFullscreen(),p},p.exitFullscreen=function(){return document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),p.checkFullscreen(),p},p.bindEvents=function(){t.on(p.addEventNS("resize orientationchange"),function(){p.throttleEvent("resize",p.resize)}),p.$container.on(p.addEventNS("click"),p.params.buttonSelector,function(e){e.preventDefault(),p.play()}),a.on(p.addEventNS("fullscreenchange  webkitfullscreenchange mozfullscreenchange MSFullscreenChange"),function(e){p.checkFullscreen()}),p.$container.on(p.addEventNS("click"),p.params.fullscreenSelector,function(e){e.preventDefault(),p.state.fullscreen?p.exitFullscreen():p.enterFullscreen()}),p.hasWebGL&&(p.$container.on(p.addEventNS("mousedown touchstart MSPointerDown pointerdown"),"canvas",function(e){e.preventDefault(),p.touchInput=!0,p.touchActive=!0;var t=o(e);p.savedX=t.clientX,p.savedY=t.clientY,p.savedAlpha=p.alpha,p.savedBeta=p.beta,p.touchWait&&window.clearTimeout(p.touchWait)}),p.$container.on(p.addEventNS("mousemove touchmove MSPointerMove pointermove"),"canvas",function(e){if(p.touchInput&&p.touchActive){e.preventDefault();var t=o(e);p.alpha=.1*(p.savedX-t.clientX)+p.savedAlpha,p.beta=.1*(t.clientY-p.savedY)+p.savedBeta,p.render()}}),p.$container.on(p.addEventNS("mouseup mouseleave touchend touchcancel MSPointerUp pointerup"),"canvas",function(e){p.touchInput&&(e.preventDefault(),p.touchActive=!1,p.touchWait&&window.clearTimeout(p.touchWait),p.touchWait=window.setTimeout(function(){p.touchInput=!1},1500))}),p.params.sensor&&t.on(p.addEventNS("deviceorientation"),function(e){p.state.fullscreen&&(p.cacheOrientation(e),p.throttleEvent("deviceorientation",p.handleOrientation,10))}))},p.init()})}}(jQuery),function(e){"use strict";e.extend({depotPluralize:function(e,t){var a=e.toString(),o=a.length,n=t[0],i=t[1],r=t[2],s=a.substr(-1),l=a.substr(-2),c=a.substr(-2,1);return 1===e||o>1&&"11"!==l&&"1"===s?n:e>1&&e<5||o>1&&"1"!==s&&"0"!==s&&"1"!==c&&parseInt(s,10)<5?i:r}})}(jQuery),function(e){"use strict";e(window);var t=e(document.body),a=27,o=13,n=32;e.fn.depotPopup=function(i){return e(this).each(function(){e.data(this,"depotPopup")||e.data(this,"depotPopup",new function(i,r){var s={};return s.id=(new Date).getTime(),s.params=e.extend(!0,{popupSelector:".js-popup",contentSelector:".js-popup-content",closeButtonSelector:".js-popup-close",visibleClassName:"is-visible",addBodyClass:!1,hideDebounce:1e3,useAria:!0,changeFocus:!0,useHash:!0,useLocation:!1,dataHashParam:"popup",extend:null,onInit:null,onShow:null,onHide:null,onToggle:null},r),s.eventNameSpace=".depotPopup-"+s.id,s.addEventNS=function(t,a){a||(a="");var o=t.split(" "),n=[];return e.each(o,function(){n.push(this+s.eventNameSpace+a)}),n.join(" ")},s.init=function(){return s.$popup=e(s.params.popupSelector),s.$popupContent=s.$popup.find(s.params.contentSelector),s.$closeButton=s.$popup.find(s.params.closeButtonSelector),s.$toggleButton=e(i),s.$closeButton.length||(s.$closeButton=e(document.createElement("button"))),s.params.useHash&&(s.hash=s.$popup.data(s.params.dataHashParam)),s.bindEvents(),e.isFunction(s.params.onInit)&&s.params.onInit.call(s,s.$popup,s.isVisible),s.params.useHash&&s.params.useLocation&&e.depotHash.has(s.hash)&&s.show(),s},s.bindEvents=function(){s.$toggleButton.on(s.addEventNS("click"),function(e){e.preventDefault(),s.toggle()}),s.$closeButton.on(s.addEventNS("click"),function(e){e.preventDefault(),s.hide()}),s.$popup.on(s.addEventNS("show"),function(){s.show()}),s.$popup.on(s.addEventNS("hide"),function(){s.hide()}),s.$toggleButton.on("keyup",function(e){e.which!==n&&e.which!==o||(e.preventDefault(),s.toggle())}),t.on(s.addEventNS("keyup"),function(e){s.isVisible&&e.which===a&&s.hide()}),s.params.useLocation&&e.depotHash.onChange(function(){e.depotHash.has(s.hash)?s.show():s.hide()})},s.toggle=function(){s.isVisible?s.hide():s.show(),e.isFunction(s.params.onToggle)&&s.params.onToggle.call(s,s.$popup,s.isVisible)},s.show=function(){s.isVisible||(s.isVisible=!0,s.$popup.addClass(s.params.visibleClassName),s.params.useAria&&s.$popup.aria("hidden",!1),s.params.changeFocus&&s.$popupContent.length&&(s.$popupContent.attr("tabindex",0),s.popupContentFocusTimeout&&window.clearInterval(s.popupContentFocusTimeout),s.popupContentFocusTimeout=window.setTimeout(function(){var e=s.$popupContent.find('input:not([type="hidden"]):first');e&&e.length?e.get(0).focus():s.$popupContent.get(0).focus()},300)),s.params.useHash&&e.depotHash.add(s.hash),s.params.addBodyClass&&(s.visibleTimeout=setTimeout(function(){t.addClass(s.params.addBodyClass)},300)),s.hideDebounce=window.setTimeout(function(){s.$popup.one(s.addEventNS("click"),function(t){e(t.target).closest(s.params.contentSelector).length||s.hide()})},s.params.hideDebounce),e.isFunction(s.params.onShow)&&s.params.onShow.call(s,s.$popup))},s.hide=function(){s.isVisible&&(s.isVisible=!1,s.$popup.removeClass(s.params.visibleClassName),s.params.useAria&&s.$popup.aria("hidden",!0),s.params.changeFocus&&s.$popupContent.length&&(s.$popupContent.attr("tabindex",-1),s.popupContentFocusTimeout&&window.clearInterval(s.popupContentFocusTimeout),s.$toggleButton.length&&!e.isPlainObject(s.$toggleButton.get(0))&&s.$toggleButton.get(0).focus()),s.params.useHash&&e.depotHash.remove(s.hash),s.params.addBodyClass&&(s.visibleTimeout&&clearTimeout(s.visibleTimeout),t.removeClass(s.params.addBodyClass)),s.hideDebounce&&(s.$popup.off(s.addEventNS("click")),window.clearTimeout(s.hideDebounce),delete s.hideDebounce),e.isFunction(s.params.onHide)&&s.params.onHide.call(s,s.$popup))},s.init()}(this,i))})}}(jQuery),function(e){"use strict";var t=e(window),a=e(document.body),o=27,n=38,i=40,r=32,s=13;e.fn.depotSelect=function(l){return e(this).each(function(){e.data(this,"depotSelect")||e.data(this,"depotSelect",new function(l,c){var p={};return p.id=(new Date).getTime(),p.defaults={labelSelector:".js-select-label",elementSelector:".js-select-element",dropdown:{enabled:!1,template:'<div class="select__dropdown js-select-dropdown"><ul class="select__options js-select-options"><li class="select__option js-select-option" tabindex="0"></li></ul></div>',optionListSelector:".js-select-options",optionSelector:".js-select-option",position:"bottom left",overflow:!1,duration:250,onShow:null,onHide:null},focusClassName:"in-focus",visibleClassName:"is-visible",activeClassName:"is-active",dropdownClassName:"has-dropdown",dropdownSelector:".js-select-dropdown"},p.params=e.extend(!0,p.defaults,c),p.eventNameSpace=".depotSelect-"+p.id,p.addEventNS=function(t,a){a||(a="");var o=t.split(" "),n=[];return e.each(o,function(){n.push(this+p.eventNameSpace+a)}),n.join(" ")},p.debounceEvent=function(t,a,o){e.isFunction(a)&&(p.debounceTimers||(p.debounceTimers={}),p.debounceTimers[t]&&window.clearTimeout(p.debounceTimers[t]),p.debounceTimers[t]=window.setTimeout(a,o||p.params.debounce))},p.init=function(){return p.$container=e(l),p.$label=p.$container.find(p.params.labelSelector),p.$element=p.$container.find(p.params.elementSelector),p.buildDropdown(),p.syncView(),p.bindEvents(),p},p.buildDropdown=function(){return p.params.dropdown&&p.params.dropdown.enabled&&(p.$dropdown&&p.$dropdown.length&&p.$dropdown.remove(),p.dropdown={},p.$dropdown=e(p.params.dropdown.template),p.$optionsList=p.$dropdown.find(p.params.dropdown.optionListSelector),p.$option||(p.$option=p.$optionsList.find(p.params.dropdown.optionSelector),p.$option.detach()),p.$element.children().each(function(){var e=p.$option.clone();e.data("option",this),e.text(this.textContent),p.$optionsList.append(e)}),p.$label.attr("tabindex",0),p.$element.attr("tabindex",-1),p.$container.addClass("dropdown-enabled"),p.params.overflow?(a.append(p.$dropdown),p.updateDropdownPosition()):p.$container.append(p.$dropdown),p.$dropdown.on(p.addEventNS("click"),p.params.dropdown.optionSelector,function(t){t.preventDefault();var a=e(this);p.debounceEvent("optionClick",function(){var t=a.data("option");t.selected||(t.selected=!0,e(t).siblings().each(function(e,t){t.selected=!1}),p.$element.trigger("change")),p.hideDropdown()})}),p.$dropdown.on(p.addEventNS("keydown"),function(e){if(p.params.dropdown&&p.params.dropdown.enabled){var t=e.which,a=p.getFocusedDropdownOption();if(t===s&&(e.preventDefault(),e.stopPropagation(),a.trigger("click")),t===i&&(e.preventDefault(),a&&a.length)){var o=a.next();o&&o.length||(o=p.$optionsList.find(p.params.dropdown.optionSelector+":first-child")),o&&o.length&&o.get(0).focus()}if(t===n&&(e.preventDefault(),a&&a.length)){var r=a.prev();r&&r.length||(r=p.$optionsList.find(p.params.dropdown.optionSelector+":last-child")),r&&r.length&&r.get(0).focus()}}})),p},p.syncView=function(){p.$selected=p.$element.find(":selected"),p.$selected.length||(p.$selected=p.$element.find("option:first"));var t=p.$selected.text();p.$label.text(t),p.$label.attr("title",t),p.params.dropdown&&p.params.dropdown.enabled&&p.$optionsList.find(p.params.dropdown.optionSelector).each(function(){var t=e(this),a=e(t.data("option"));p.$selected.val()===a.val()?t.addClass(p.params.activeClassName):t.removeClass(p.params.activeClassName)})},p.bindEvents=function(){t.on(p.addEventNS("resize"),function(){p.debounceEvent("resize",function(){p.params.dropdown&&p.params.dropdown.enabled&&p.params.dropdown.overflow&&p.updateDropdownPosition()},5)}),p.$element.on(p.addEventNS("update"),function(e){p.debounceEvent("update",function(){p.buildDropdown(),p.syncView()},30)}),p.$element.on(p.addEventNS("change"),function(){p.syncView()}),p.$element.on(p.addEventNS("focus"),function(){p.$label.addClass(p.params.focusClassName)}),p.$element.on(p.addEventNS("blur"),function(){p.$label.removeClass(p.params.focusClassName)}),p.$label.on(p.addEventNS("focus"),function(){p.$label.addClass(p.params.focusClassName),p.params.dropdown&&p.params.dropdown.enabled||p.$element.trigger("focus")}),p.$label.on(p.addEventNS("click"),function(e){p.params.dropdown&&p.params.dropdown.enabled&&(e.preventDefault(),p.debounceEvent("dropdown",function(){p.toggleDropdown()})),p.$label.removeClass(p.params.focusClassName)}),p.params.dropdown&&p.params.dropdown.enabled&&p.$label.on(p.addEventNS("keydown"),function(t){var a=t.which;-1!==e.inArray(a,[i,r,s])&&(t.preventDefault(),p.showDropdown())}),p.$container.closest("form").on(p.addEventNS("reset"),function(){p.reset()}),p.$container.on(p.addEventNS("reset"),function(e){e.preventDefault(),e.stopPropagation(),p.reset()}),a.on(p.addEventNS("keyup"),function(e){p.params.dropdown&&p.params.dropdown.enabled&&p.dropdownVisible&&e.which===o&&p.hideDropdown()}),a.on(p.addEventNS("click"),function(t){var a=t.target;p.params.dropdown&&p.params.dropdown.enabled&&p.dropdownVisible&&(e(a).closest(p.params.dropdownSelector).length||p.hideDropdown())}),t.on(p.addEventNS("blur"),function(){p.params.dropdown&&p.params.dropdown.enabled&&p.dropdownVisible&&p.hideDropdown()})},p.toggleDropdown=function(){return p.params.dropdown&&p.params.dropdown.enabled&&(p.dropdownVisible?p.hideDropdown():p.showDropdown()),p},p.showDropdown=function(){return p.dropdownVisible||p.dropdownBusy||(p.dropdownVisible=!0,p.$dropdown.addClass(p.params.visibleClassName),p.$container.addClass(p.params.dropdownClassName),p.params.dropdown.duration?(p.dropdownBusy=!0,window.setTimeout(p.onShowDropdown,p.params.dropdown.duration)):p.onShowDropdown()),p},p.hideDropdown=function(){return p.dropdownVisible&&!p.dropdownBusy&&(p.dropdownVisible=!1,p.$dropdown.removeClass(p.params.visibleClassName),p.$container.removeClass(p.params.dropdownClassName),p.params.dropdown.duration?(p.dropdownBusy=!0,window.setTimeout(p.onHideDropdown,p.params.dropdown.duration)):p.onHideDropdown()),p},p.onShowDropdown=function(){p.dropdownBusy=!1,p.$dropdown.get(0).focus();var t=p.getActiveDropdownOption();t&&t.length&&t.get(0).focus(),e.isFunction(p.params.dropdown.onShow)&&p.params.dropdown.onShow.call(p)},p.onHideDropdown=function(){p.dropdownBusy=!1,p.$label.get(0).focus(),e.isFunction(p.params.dropdown.onHide)&&p.params.dropdown.onHide.call(p)},p.getActiveDropdownOption=function(){var e=p.$dropdown.find(p.params.dropdown.optionSelector+"."+p.params.activeClassName);return e&&e.length||(e=p.$dropdown.find(p.params.dropdown.optionSelector+":first")),e},p.getFocusedDropdownOption=function(){var e=p.$dropdown.find(p.params.dropdown.optionSelector+":focus");return e&&e.length||(e=p.$dropdown.find(p.params.dropdown.optionSelector+":first")),e},p.updateDropdownPosition=function(){if(p.params.dropdown&&p.params.dropdown.enabled){var e={};e.offset=p.$container.offset(),e.width=p.$container.outerWidth(),e.height=p.$container.outerHeight();var o=t.width(),n=a.outerHeight();if(p.params.dropdown.position&&p.params.dropdown.position.length){var i={},r=p.params.dropdown.position;-1!==r.indexOf("top")?i.bottom=n-e.offset.top:i.top=e.offset.top+e.height,-1!==r.indexOf("left")?i.left=e.offset.left:i.right=o-(e.offset.left+e.width),p.$dropdown.css(i)}}return p},p.reset=function(){p.$selected=p.$element.find("option:first"),p.$selected.attr("selected","selected").prop("selected",!0).siblings().removeAttr("selected").prop("selected",!1),p.$label.text(p.$selected.text())},p.init()}(this,l))})}}(jQuery),function(e){"use strict";function t(){return this.defaults={type:"local",path:"/"},this}t.prototype.getMilliseconds=function(e){var t=(e||"").toString().replace(/^([0-9.-]+)(Y|M|D|h|m|s|ms)$/,function(e,t,a){var o=parseFloat(t),n=1;switch(a){case"Y":n=31536e6;break;case"M":n=2592e6;break;case"D":n=864e5;break;case"h":n=36e5;break;case"m":n=6e4;break;case"s":n=1e3;break;default:n=1}return isNaN(o)?0:o*n}),a=parseFloat(t);return isNaN(a)?0:a},t.prototype.getExpirationDate=function(e){var t=new Date,a=this.getMilliseconds(e);return a?t.setTime(t.getTime()+a):t=!1,t},t.prototype.encode=function(e){return"object"==typeof e?encodeURIComponent(JSON.stringify(e)):encodeURIComponent(e)},t.prototype.decode=function(e){var t,a=decodeURIComponent(e);try{t=JSON.parse(a)}catch(e){}return t||a},t.prototype.setItem=function(t,a,o){var n=!1,i=e.extend(!0,{},this.defaults,o),r=this.encode(a);if(i.expires){var s=this.getExpirationDate(i.expires);i.expires=s?s.toUTCString():0}switch(i.type){case"cookie":var l=t+"="+r;i&&e.each(i,function(e,t){"type"!==e&&(l+="; "+e+"="+t)});try{document.cookie=l,n=!0}catch(e){console.error(e)}break;case"session":var c=this.encode(e.extend(!0,i,{value:r}));try{sessionStorage.setItem(t,c),n=!0}catch(e){console.error(e)}break;default:var p=this.encode(e.extend(!0,i,{value:r}));try{localStorage.setItem(t,p),n=!0}catch(e){console.error(e)}}return n},t.prototype.getItem=function(e,t){var a;switch(t){case"cookie":try{var o=document.cookie,n=o.indexOf(e);if(n>-1){var i=o.substr(n).indexOf(";");-1===i&&(i=o.length),(a=o.substr(n,i).split("=")[1])&&(a=this.decode(a))}}catch(e){console.error(e)}break;case"session":try{var r=this.decode(sessionStorage.getItem(e));if(r&&"object"==typeof r)Date.parse(r.expires)>Date.now()?a=this.decode(r.value):this.removeItem(e,t)}catch(e){console.error(e)}break;default:try{var s=this.decode(localStorage.getItem(e));if(s&&"object"==typeof s)Date.parse(s.expires)>Date.now()?a=this.decode(s.value):this.removeItem(e,t)}catch(e){console.error(e)}}return a},t.prototype.getMeta=function(e,t){var a;switch(t){case"cookie":break;case"session":try{a=this.decode(sessionStorage.getItem(e))}catch(e){console.error(e)}break;default:try{a=this.decode(localStorage.getItem(e))}catch(e){console.error(e)}}return a},t.prototype.removeItem=function(e,t){switch(t){case"cookie":try{this.setItem(e,null,{type:t,expires:"-1Y"})}catch(e){console.error(e)}break;case"session":try{sessionStorage.removeItem(e)}catch(e){console.error(e)}break;default:try{localStorage.removeItem(e)}catch(e){console.error(e)}}},t.prototype.clear=function(t){var a=this;switch(t){case"cookie":try{e.each(document.cookie.split("; "),function(e,o){a.removeItem(o,t)})}catch(e){console.error(e)}break;case"session":try{sessionStorage.clear()}catch(e){console.error(e)}break;default:try{localStorage.clear()}catch(e){console.error(e)}}},e.depotStorage=new t}(jQuery),function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=e}(),function(e){"use strict";var t=e(window);function a(){window.IS_DESKTOP=t.innerWidth()>1060}function o(e,t){var a=new RegExp("\\$\\{([^$}]+)\\}","gm");return t?e.replace(a,function(e,a){var o=t[a],n=e;return void 0===o||"string"!=typeof o&&"number"!=typeof o||(n=o),n}):e}t.on("resize initResizeDetect",function(e,t){t?a():(window.clearTimeout(window.initResizeDetectTimeout),window.initResizeDetectTimeout=window.setTimeout(a,30))}).trigger("initResizeDetect",!0),e(function(){var a=e(document.body);new function(e,t){var a={};a.scrolled=!1,a.scrollDelay=20,a.isScrolled=function(){return e.scrollTop()>a.scrollDelay},a.addClass=function(){t.addClass("is-scrolled"),a.hasClass=!0},a.removeClass=function(){t.removeClass("is-scrolled"),a.hasClass=!1},a.toggleClass=function(){a.hasClass?a.removeClass():a.addClass()},a.checkScrollStatus=function(){var e=a.isScrolled();a.scrolled!==e&&(a.scrolled=e,a.toggleClass())},a.init=function(){e.on("scroll",function(){a.checkScrollStatus()})},a.init()}(t,a);function n(){e(".grid").isotope({itemSelector:".grid-item",stamp:".stamp-item, .news-promo",masonry:{columnWidth:1.5}})}function i(){e(".expert-opinion-carousel").owlCarousel({items:1,loop:!0,nav:!1,dots:!0,margin:0,smartSpeed:200,animateOut:!1,pullDrag:!1,touchDrag:!window.IS_DESKTOP,mouseDrag:!1,autoplay:!0,autoplayTimeout:5e3}),e(".related-links-carousel").owlCarousel({loop:!0,nav:!0,dots:!1,margin:10,smartSpeed:200,responsive:{0:{items:1},768:{items:2},1060:{items:3}},onInitialized:function(){var e=this._items.length,t=this._breakpoint;e<=this.options.responsive[t].items?this.$element.find(".owl-controls").hide():this.$element.find(".owl-controls").show()},onResized:function(){var e=this._items.length,t=this._breakpoint;e<=this.options.responsive[t].items?this.$element.find(".owl-controls").hide():this.$element.find(".owl-controls").show()}})}var r=e(".js-preload");r.length?r.imagesLoaded(function(){n(),i()}):(n(),i()),e(".js-fit").each(function(){var a=e(this),o=a.offset().top,n=a.height(),i=t.innerHeight()-e("footer").height();o+n<i&&a.css({"min-height":i-o})}),e(function(){e(".js-select").depotSelect()}),e(function(){e(".js-dropdown-select").depotSelect({dropdown:{enabled:!0}})}),e(".js-fullpage").each(function(){var t=e(this),a=t.find(".js-section"),o=e(".js-scroll-down");window.IS_DESKTOP||t.find("video").remove(),e.isFunction(e.fn.fullpage)&&(window.IS_DESKTOP?(t.fullpage({verticalCentered:!1,sectionSelector:".js-section",navigation:window.IS_DESKTOP,autoScrolling:window.IS_DESKTOP,fitToSection:window.IS_DESKTOP,fixedElements:"header, .header-side-menu-container, .submenu, .fp-ignore",scrollOverflow:t.find(".results-screen").length,normalScrollElements:"footer",normalScrollElementTouchThreshold:3,afterRender:function(){a.eq(0).addClass("is-visible")},onLeave:function(t,o){return a.eq(o-1).addClass("is-visible"),!e(".is-no-scroll").length}}),o.on("click",function(t){t.preventDefault(),e.isFunction(e.fn.fullpage.moveSectionDown)&&e.fn.fullpage.moveSectionDown()})):a.addClass("is-visible"))}),e(".js-load-more-container").each(function(){var t=e(this);e.isFunction(e.fn.depotLoaderMore)&&t.depotLoaderMore({renderResponse:function(t,a,o){var n=e(document.createElement("div"));n.html(t),n.find(".item-last").length&&o.hide(),a.data("isotope")?n.imagesLoaded(function(){n.children().each(function(){a.append(this).isotope("appended",this).isotope("layout")})}):n.imagesLoaded(function(){n.children().each(function(){a.append(this)})})}})}),e(".js-search-toggle").depotPopup({addBodyClass:"is-no-scroll",popupSelector:".js-popup-search",contentSelector:".js-search-form",useHash:!1,onInit:function(){this.$popupForm=this.$popup.find(".js-search-form"),this.hideMenuEvent=e.Event("hide"),this.hideMenuEvent.target=e(".js-menu-toggle").get(0)},onShow:function(){a.trigger(this.hideMenuEvent)},onHide:function(){this.$popupForm.trigger("reset")}}),t.on("keydown",function(t){70===t.which&&t.shiftKey&&(t.metaKey||t.ctrlKey)&&(t.preventDefault(),e(".js-search-toggle").trigger("click"))}),e(".js-search-form").depotForm({fieldContainerSelector:".form-field",fieldInUseClassName:"inuse",fieldErrorContainerSelector:".form-error-text",fieldErrorClassName:"error",validate:!1}),e(".js-vacancies-form").depotForm({fieldContainerSelector:".form-field",fieldInUseClassName:"inuse",fieldErrorContainerSelector:".form-error-text",fieldErrorClassName:"error",validate:!1}),e(".js-feedback-form").depotForm({fieldContainerSelector:".form-field",fieldInUseClassName:"inuse",fieldErrorContainerSelector:".form-error-text",fieldErrorClassName:"error",formProcessingClassName:"is-processing",realtimeValidation:!1,errors:{name:"Введите ваше имя",email:"Например: example@example.ru"},onInit:function(){try{this.$system=this.$form.find(".js-form-system");var e={location:htmlEscape(location.href),agent:htmlEscape(navigator?navigator.userAgent:"unknown"),width:htmlEscape(window.innerWidth),height:htmlEscape(window.innerHeight),colorDepth:htmlEscape(screen?screen.colorDepth:"unknown"),devicePixelRatio:htmlEscape(window.devicePixelRatio||"unknown"),cookieEnabled:htmlEscape(navigator?navigator.cookieEnabled:"unknown")};this.$system.val(JSON.stringify(e))}catch(e){}},onSubmitAjax:function(t){if(!0===t.success){if(e(".header-side-menu-container.is-visible").length){var o=e.Event("click");o.target=e(".js-menu-toggle").get(0),a.trigger(o)}this.$form.trigger("reset");var n=e(".js-form-success");window.setTimeout(function(){n.aria("hidden",!1).addClass("is-visible"),e("#"+n.aria("labelledby")).focus()},500),window.setTimeout(function(){n.aria("hidden",!0).removeClass("is-visible")},3500)}else this.setError("captcha_1","Код введен неверно"),this.$form.trigger("validationError","Код введен неверно")}}),e(".js-resume-form").depotForm({fieldContainerSelector:".form-field",fieldInUseClassName:"inuse",fieldErrorContainerSelector:".form-error-text",fieldErrorClassName:"error",formProcessingClassName:"is-processing",realtimeValidation:!1,errors:{name:"Введите ваше имя",email:"Например: example@example.ru"},onInit:function(){var t=this;a.on("click",".js-clone-button",function(){var a=e(this).closest(".form-field"),o=a.clone(!1);o.removeClass(t.params.fieldInUseClassName),o.removeClass(t.params.fieldErrorClassName),o.find(t.params.fields+", label").each(function(){var t=e(this);t.is("label")?t.attr("for",t.attr("for").replace(/([0-9]+)/,function(e,t){return parseInt(t,10)+1})):(t.attr("id",t.attr("id").replace(/([0-9]+)/,function(e,t){return parseInt(t,10)+1})),this.value=this.defaultValue)}),o.insertAfter(a)})},onSubmitAjax:function(t){var a=this;if(!0===t.success){var o=e(".js-resume-success");window.setTimeout(function(){a.$form.trigger("reset"),o.aria("hidden",!1).addClass("is-visible"),e("#"+o.aria("labelledby")).focus()},500),window.setTimeout(function(){o.aria("hidden",!0).removeClass("is-visible")},3500)}else a.setError("captcha_1","Код введен неверно"),a.$form.trigger("validationError","Код введен неверно")}}),e(".js-side-menu").each(function(){var t={};t.id=(new Date).getTime(),t.videos=[],t.$menu=e(this),t.$container=t.$menu.closest(".header-side-menu-container"),t.showMenu=function(){t.visible=!0,a.addClass("is-no-scroll").on("click.sideMenu-"+t.id,function(a){e(a.target).closest(".js-side-menu").length||t.hideMenu()}),t.$menu.addClass("is-visible").aria("hidden",!t.visible),t.$container.addClass("is-visible").aria("hidden",!t.visible),e.isFunction(e.fn.fullpage)&&e.isFunction(e.fn.fullpage.setAllowScrolling)&&e.isFunction(e.fn.fullpage.setKeyboardScrolling)&&(e.fn.fullpage.setAllowScrolling(!1),e.fn.fullpage.setKeyboardScrolling(!1)),t.pauseVideos()},t.hideMenu=function(){t.visible=!1,a.removeClass("is-no-scroll").off(".sideMenu-"+t.id),t.$menu.removeClass("is-visible").aria("hidden",!t.visible),t.$container.removeClass("is-visible").aria("hidden",!t.visible),e.isFunction(e.fn.fullpage)&&e.isFunction(e.fn.fullpage.setAllowScrolling)&&e.isFunction(e.fn.fullpage.setKeyboardScrolling)&&(e.fn.fullpage.setAllowScrolling(!0),e.fn.fullpage.setKeyboardScrolling(!0)),t.playVideos()},t.pauseVideos=function(){e("video").each(function(){this&&!this.paused&&(this.pause(),t.videos.push(this))})},t.playVideos=function(){e.each(t.videos,function(e){this&&this.paused&&(this.play(),t.videos.splice(e,1))})},a.on("click",".js-menu-toggle",function(e){e.preventDefault(),e.stopPropagation(),t.visible?t.hideMenu():t.showMenu()}),a.on("show",".js-menu-toggle",function(){t.visible||t.showMenu()}),a.on("hide",".js-menu-toggle",function(){t.visible&&t.hideMenu()}),a.on("keyup",function(e){t.visible&&27===e.which&&t.hideMenu()}),e.isFunction(e.fn.swipe)&&t.$container.swipe({swipeRight:function(){t.hideMenu()},allowPageScroll:e.fn.swipe.pageScroll.VERTICAL,fingers:e.fn.swipe.fingers.ALL})}),e(".js-tabs").each(function(t,a){var o={};return o.init=function(){return o.cache={},o.$container=e(a),o.$nav=o.$container.find(".js-tabs-nav"),o.$tabs=o.$container.find(".js-tabs-content"),o.$nav.find(".js-tabs-button").each(function(){var t=e(this),a=t.data("tab"),n=o.$tabs.find('.js-tabs-tab[data-tab="'+a+'"]');o.cache[a]={id:a,$button:t,$tab:n},t.is(".is-active")&&(o.activeId=a)}),o.goToActive(),o.bindEvents(),o},o.goToActive=function(){return o.activeId?o.goTo(o.activeId):o.goTo(o.$nav.find(".js-tabs-button").first().data("tab")),o},o.goTo=function(e){if(o.$activeButton&&o.$activeTab){o.$activeButton.removeClass("is-active").attr({"aria-selected":!1,"aria-expanded":!1}),o.$activeTab.removeClass("is-active").attr({"aria-hidden":!0});var t=o.$activeTab.find(".js-fotorama").data("fotorama");t&&t.stopVideo&&t.stopVideo()}var a=o.cache[e].$button,n=o.cache[e].$tab;a.addClass("is-active").attr({"aria-selected":!0,"aria-expanded":!0}),n.addClass("is-active").attr({"aria-hidden":!1}),o.$activeButton=a,o.$activeTab=n;var i=o.$activeTab.find(".js-fotorama").data("fotorama");return i&&i.resize(),o},o.bindEvents=function(){return o.$nav.on("click",".js-tabs-button",function(t){t.preventDefault();var a=e(this).data("tab");o.goTo(a)}),o},o.init()}),e(".js-fotorama").each(function(){var t={};t.$container=e(this),t.linkTemplate='<a class="fotorama-get" href="{{url}}" download><span class="fotorama-get-title">Скачать</span>{{weight}}</a>',t.weightTemplate=' <span class="fotorama-get-weight">({{weight}})</span>',t.captionTemplate='<div class="fotorama-caption"><h5 class="fotorama-caption-title">{{title}}</h5><h6 class="fotorama-caption-text">{{text}}</h6></div>',t.renderTemplate=function(e,t){return e.replace(/\{\{([^}]+)}}/gi,function(e,a){return t[a]||""})},t.hackFrame=function(a){var o=a.full||a.file,n=a.file||a.full,i=a.weight,r=a.title,s=a.text,l=a.$stageFrame,c=l.closest(".fotorama__stage"),p="";if(o){i&&(p=t.renderTemplate(t.weightTemplate,{weight:i}));var d=e(t.renderTemplate(t.linkTemplate,{url:n,weight:p}));t.$button&&(t.$button.remove(),delete t.$button),c.prepend(d),t.$button=d}else t.$button&&(t.$button.remove(),delete t.$button);if(r&&s){var u=e(t.renderTemplate(t.captionTemplate,{title:r,text:s}));t.$caption&&(t.$caption.remove(),delete t.$caption),l.append(u),t.$caption=u,l.append(u)}},t.showCaption=function(){t.$caption&&t.$caption.addClass("is-visible")},t.fotorama=t.$container.on("fotorama:ready fotorama:show fotorama:showend",function(e,a){"fotorama:show"===e.type&&t.hackFrame(a.activeFrame),"fotorama:showend"===e.type&&t.showCaption(),"fotorama:ready"!==e.type||1!==a.size||a.activeFrame.video||a.activeFrame.$stageFrame.on("click",function(){a.requestFullScreen()})}).fotorama({width:"100%",thumbwidth:94,thumbheight:50,thumbmargin:10,allowfullscreen:"native",nav:"thumbs",arrows:!0,swipe:!0,click:!1,trackpad:!0}),t.$container.data("fotorama",t.fotorama)}),e(".js-play-video").on("click",function(){var t=e(this),a=t.data("video"),o=e(document.createElement("iframe"));o.attr("src",a+"?autoplay=true"),o.attr("allowfullscreen","allowfullscreen"),t.after(o),t.removeClass("is-visible")}),e(".js-video-carousel").each(function(){var t=e(this),a=t.find(".item").length||0;a>1&&t.owlCarousel({items:1,margin:20,loop:!0,mouseDrag:!1,touchDrag:!window.IS_DESKTOP,pullDrag:!1,nav:!1,dots:a>1})}),e(".js-toggle-movie").depotPopup({useHash:!1,addBodyClass:"is-no-scroll",popupSelector:".js-movie-popup",onShow:function(){var t=this.$toggleButton.data("video"),a=e(document.createElement("iframe"));a.attr("src",t+"?autoplay=1"),a.attr("allowfullscreen","allowfullscreen"),this.$popupContent.find(".popup-content-video").append(a)},onHide:function(){var e=this.$popupContent.find(".popup-content-video").find("iframe");e&&e.length&&e.remove()}}),e(".js-show-future").one("click",function(a){a.preventDefault();var o=e(this),n=e(".js-future");o.addClass("is-hidden"),window.setTimeout(function(){t.trigger("init.timeline")},100),n.slideDown(700)}),e(".js-timeline").each(function(){var a=e(this).find(".js-timeline-item"),o={visible:0};o.updateVisibility=function(){var n=t.scrollTop(),i=t.innerHeight(),r=n+i;a.each(function(t){var a=e(this),i=a.offset().top;a.is(":visible")&&!a.is(".is-visible")&&i<r&&i>n&&(a.addClass("is-visible"),o.visible+=1),o.length=t}),o.length===o.visible&&t.off(".timeline")},t.on("scroll.timeline init.timeline",o.updateVisibility).trigger("init.timeline")}),e(".js-instagam-feed").each(function(){if(window.IS_DESKTOP){var t=e(this),a=t.data("user"),o=t.data("token");window.Instafeed&&window.IS_DESKTOP&&window.setTimeout(function(){new window.Instafeed({userId:a,accessToken:o,get:"user",limit:12,template:'<a class="widget-item" href="{{link}}" target="_blank"><img class="widget-item-image" src="{{image}}" alt="{{caption}}"><span class="widget-item-likes">{{likes}}</span></a>',success:function(e){var a=e.data[0].user;t.find(".js-instagam-feed-ava").prop("src",a.profile_picture).attr("alt",a.full_name),t.find(".js-instagam-feed-link").text("@"+a.username)},error:function(e){console.warn(e)}}).run()},0)}}),e(".js-person-popup-toggle").each(function(){var t={};t.$popupToggle=e(this),t.popupId=t.$popupToggle.data("popup"),e.isFunction(e.fn.depotPopup)&&t.$popupToggle.depotPopup({useHash:!0,useLocation:!0,addBodyClass:"is-no-scroll",popupSelector:'.js-person-popup[data-popup="'+t.popupId+'"]'})}),e.isFunction(e.fn.depotPopup)&&e(document.createElement("button")).depotPopup({useHash:!1,addBodyClass:"is-no-scroll",popupSelector:".js-social-popup",onInit:function(){if(e.depotStorage&&!e.depotStorage.getItem("social-popup","cookie")){var t=parseFloat(this.$popup.data("timer"));t||(t=3e4),window.setTimeout(this.show,t)}},onHide:function(){e.depotStorage&&e.depotStorage.setItem("social-popup",1,{type:"cookie",expires:"1Y"})}}),e.isFunction(e.fn.depotPopup)&&e(".js-show-enroll-popup").depotPopup({useLocation:!0,addBodyClass:"is-no-scroll",popupSelector:".js-enroll-popup",onInit:function(){var t=this;t.$form=t.$popupContent.find(".js-enroll-form"),t.$form&&t.$form.length&&t.$form.depotForm({fieldContainerSelector:".form-field",fieldInUseClassName:"inuse",fieldErrorContainerSelector:".form-error-text",fieldErrorClassName:"error",realtimeValidation:!1,onSubmitAjax:function(a){if(!0===a.success){var o=e(".js-enroll-success");window.setTimeout(function(){t.hide(),o.aria("hidden",!1).addClass("is-visible"),e("#"+o.aria("labelledby")).focus()},500),window.setTimeout(function(){o.aria("hidden",!0).removeClass("is-visible")},3500)}else this.setError("captcha_1","Код введен неверно"),this.$form.trigger("validationError","Код введен неверно")}})},onHide:function(){this.$form.trigger("reset")}}),e(".js-enlarge").each(function(a,o){var n={id:a};return n.init=function(){window.IS_DESKTOP&&n.collectElements().collectMeasurements().updateMeasurements().bindResize()},n.collectElements=function(){return n.$container=e(o),n.$footer=e(".js-footer"),n},n.collectMeasurements=function(){return n.windowHeight=t.height(),n.containerOuterHeight=n.$container.css({minHeight:0}).outerHeight(!0),n.containerTop=n.$container.offset().top,n.footerHeight=n.$footer.height(),n.containerBottom=n.containerOuterHeight+n.containerTop,n.windowBottom=n.windowHeight-n.footerHeight,n},n.updateMeasurements=function(){return n.windowBottom>n.containerBottom&&(n.containerMinHeight=n.windowHeight-n.footerHeight-n.containerTop,n.$container.css({minHeight:n.containerMinHeight})),n},n.bindResize=function(){return t.on("resize",function(){n.waitingDebounce||(n.waitingDebounce=!0,n.collectMeasurements().updateMeasurements()),n.resizeTimeout&&window.clearTimeout(n.resizeTimeout),n.resizeTimeout=window.setTimeout(function(){n.waitingDebounce=!1},50)}),n},n.init()}),e.isFunction(e.fn.depotAlphabetNav)&&e(".js-alphabet").depotAlphabetNav({easing:"ease-in-out"}),a.on("click",".js-toggle-vacancy",function(t){t.preventDefault();var a=e(this),o=a.closest(".js-vacancy").find(".js-toggle-content");a.is(".is-active")?(a.removeClass("is-active").text(a.data("default")),o.slideUp(500)):(a.addClass("is-active").text(a.data("active")),o.slideDown(500))}),e(".js-vacancy-filter").each(function(t,a){var o={};return o.params={resultsSelector:".js-results-list",resultSelector:".js-results-result",categorySelector:".js-vacancy-category",buttonSelector:".js-vacancy-button",activeClassName:"is-active"},o.init=function(){return o.$filter=e(a),o.$resultsList=e(o.params.resultsSelector),o.$results=e(o.params.resultSelector),o.$resultsCount=e(o.params.resultsCountSelector),o.bindEvents(),o},o.bindEvents=function(){return o.$filter.on("click",o.params.buttonSelector,function(t){t.preventDefault(),this.blur(),e(this).toggleClass(o.params.activeClassName).siblings(o.params.buttonSelector).removeClass(o.params.activeClassName),o.updateFilterParams(),o.updateResults()}),o},o.updateFilterParams=function(){return o.filterParams={},o.$filter.find(o.params.categorySelector).each(function(){var t=e(this).find(o.params.buttonSelector+"."+o.params.activeClassName);if(t.length){var a=t.data();e.each(a,function(e,t){o.filterParams[e]=t})}}),o},o.updateResults=function(){o.$results.hide();var e=o.$resultsList.find(o.params.resultSelector+o.getFilterParams());e.length&&e.show()},o.getFilterParams=function(){var t="";return e.each(o.filterParams,function(e,a){t+="[data-"+e+'="'+a+'"]'}),t},o.init()}),e(".js-view-switcher").each(function(){var t=e(this),a=e(".grid");if(t.on("click",".js-change-view",function(t){t.preventDefault();var o=e(this),n=o.data("view");o.addClass("is-active").siblings().removeClass("is-active"),a.removeClass(function(e,t){return(t.match(/(^|\s)view-\S+/g)||[]).join(" ")}).addClass("view-"+n),a.data("isotope")&&e.isFunction(e.fn.isotope)&&a.isotope("layout"),e.depotStorage&&e.depotStorage.setItem("news-view",n,{type:"cookie",expires:"1M",path:"/novosti/"})}),e.depotStorage){var o=e.depotStorage.getItem("news-view","cookie");if(o){var n=t.find('[data-view="'+o+'"]');n&&n.length?n.trigger("click"):t.find(".js-change-view:last").trigger("click")}else t.find(".js-change-view:last").trigger("click")}}),e(".js-media-footage").each(function(t,n){var i={};i.data={},i.state={month:"",month_verbose:"",year:"",busy:!1};var r=["","январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"];return i.init=function(){return i.optionTemplate='<option value="${month}" ${selected}>${month_verbose}</option>',i.galleryListTemplate='<div class="media-footage-gallery js-media-footage-gallery ${preview}"><ul class="gallery__container js-depot-gallery-container">${items}</ul></div>${button}',i.galleryItemTemplate='<li><figure data-file="${original}" data-weight="${size}" class="gallery__slide js-depot-gallery-slide"><div class="gallery__resource js-depot-gallery-resource"><img src="${thumb_fast}" data-normal="${thumb_normal}" data-retina="${thumb_retina}" data-full="${normal}" width="261" height="196" alt="${title}" class="gallery__resource-image js-depot-gallery-resource-image"></div><figcaption class="gallery__info js-depot-gallery-info"><time datetime="${date}" class="media-footage-date">${date_verbose}</time><span class="media-footage-title">${title}</span></figcaption></figure></li>',i.galleryToggleTemplate='<button class="media-footage-toggle js-media-footage-toggle" type="button" data-alt="Свернуть">Все фотографии за ${month_verbose}</button>',i.$container=e(n),i.$filter=i.$container.find(".js-media-footage-filter"),i.$monthSelect=i.$filter.find('[name="month"]'),i.$yearSelect=i.$filter.find('[name="year"]'),i.$footageContainer=i.$container.find(".js-media-footage-container"),i.getFilterYear(),i.getDataByYear(),i.bindEvents(),i},i.setMonth=function(e){return i.state.month=parseInt(e,10),i.state.month_verbose=r[i.state.month],i},i.setYear=function(e){return i.state.year=parseInt(e,10),i},i.getFilterMonth=function(){return i.setMonth(i.$monthSelect.val()),i.state.month},i.getFilterYear=function(){return i.setYear(i.$yearSelect.val()),i.state.year},i.getDataByYear=function(){i.state.busy=!0,i.$container.addClass("is-processing"),e.ajax({url:i.$filter.attr("action"),type:i.$filter.attr("method"),dataType:"json",data:{year:i.state.year},success:function(t){if(t.data){i.data={};var a=[];i.$monthSelect.empty(),e.each(t.data,function(e,t){var o=new Date(t.date).getMonth()+1;i.data[o]||(a.push(o),i.data[o]=[]),i.data[o].push(t)}),a.sort(function(e,t){var a=parseFloat(e),o=parseFloat(t),n=0;return a>o&&(n=1),a<o&&(n=-1),n});var n=new Date,s=n.getMonth()+1,l=n.getFullYear();if(i.state.year===l&&a.length&&a.length>1){var c=13;e.each(a,function(e,t){var a=s-t;a>=0&&a<c&&(c=a,i.setMonth(t))})}else i.setMonth(a[0]);e.each(a,function(e,t){i.$monthSelect.append(o(i.optionTemplate,{month:t,month_verbose:r[t],selected:t===i.state.month?"selected":""}))}),i.$monthSelect.trigger("update"),i.swapGalleryContent()}},error:function(e){i.state.busy=!1,i.$container.removeClass("is-processing"),i.$gallery||i.$container.addClass("is-hidden"),console.warn("json API error (%s: %s)",e.status,e.statusText)}})},i.swapGalleryContent=function(){var t,a="",n="",r="",s="",l=i.data[i.state.month],c=l?l.length:0,p=window.innerWidth;t=p<=400?2:p<=640?4:p<=768?6:8,l&&c&&e.each(l,function(e,t){n+=o(i.galleryItemTemplate,t)}),c>t&&(s+=" is-preview",r+=o(i.galleryToggleTemplate,i.state)),a+=o(i.galleryListTemplate,{preview:s,items:n,button:r});var d=e(a);i.$footageContainer.empty().append(d);var u=i.$footageContainer.find(".js-media-footage-gallery");return i.$gallery=i.initMediaGallery(u),i},i.initMediaGallery=function(t){return t.depotGallery({ratio:.75,viewport:{enabled:!1},popup:{enabled:!0,fullscreen:!0,sourceFromData:!0,captionEnabled:!0,captionInside:!0,buttons:{enabled:!0,next:{enabled:!0},prev:{enabled:!0},close:{enabled:!0}}},swipe:{enabled:!0},onInit:function(t){i.$container.removeClass("is-processing");var a=t.find(".js-depot-gallery-resource-image");a.addClass("is-tmp");var o=this,n=window.devicePixelRatio&&window.devicePixelRatio>1?"retina":"normal";o.preloadImages(a,n,function(t,a){e(this).removeClass("is-tmp"),t===a&&(i.state.busy=!1)}),o.$downloadButton=e('<a class="media-footage-download" href="#!" download target="_blank"></a>'),o.$popupButtons.append(o.$downloadButton),o.updateDownloadButton=function(e,t){var a="Скачать"+(t?" ("+t+")":"");return o.$downloadButton.text(a),o.$downloadButton.attr("href",e),o},t.on("click",".js-depot-gallery-slide",function(t){t.preventDefault(),o.$slides.removeClass("is-active"),e(this).addClass("is-active"),o.showPopup()})},onPopupShow:function(e,t){var a=t.data("weight"),o=t.data("file");this.updateDownloadButton(o,a)},onChange:function(e,t){var a=t.data("weight"),o=t.data("file");this.updateDownloadButton(o,a)}}),t},i.bindEvents=function(){return i.$container.on("click",".js-media-footage-toggle",function(t){t.preventDefault(),i.$toggleButton=e(this),i.toggleContent()}),i.$filter.on("change",function(){var e=i.state.year;i.getFilterMonth(),i.getFilterYear(),e!==i.state.year?i.getDataByYear(i.state.year):i.swapGalleryContent()}),i},i.toggleContent=function(){var t=i.$toggleButton.text(),o=i.$toggleButton.data("alt");if(i.$toggleButton.text(o),i.$toggleButton.data("alt",t),i.contentMaximalized=!i.contentMaximalized,i.$gallery.toggleClass("is-full").css({maxHeight:i.contentMaximalized?i.$gallery.find(".js-depot-gallery-container").outerHeight():""}),!i.contentMaximalized){var n=i.$container.offset().top-e(".media-b").offset().top;a.on("mousewheel.footageScroll DOMMouseScroll.footageScroll touchemove.footageScroll MSPointerMove.footageScroll pointermove.footageScroll",function(){e("html, body").stop()}),e("html, body").stop().animate({scrollTop:n},400,function(){a.off(".footageScroll")})}return i},i.init()})})}(jQuery);